org.flashNight.arki.unit.UnitComponent.Targetcache.TargetCacheThresholdTuner.run({repeats:5, thresholds:[8,16,24,32,48,64]})




============================================================
 TargetCacheThresholdTuner 排序微基准（方案A）
 仅测量 预提取+排序 路径，排除 reconcile/collection 开销
 thresholds=8,16,24,32,48,64
 sizes=8,12,16,20,24,32,48,64,96,128,256,512
 distributions=random,ascending,descending,nearlySorted,twoRuns,sawtooth,fewUniques,allSame
 seed=1234567
============================================================

--- threshold = 8 ---

--- threshold = 16 ---

--- threshold = 24 ---

--- threshold = 32 ---

--- threshold = 48 ---

--- threshold = 64 ---

========== 表1: 阈值 × 规模 平均耗时(ms) ==========
threshold  n=8       n=12      n=16      n=20      n=24      n=32      n=48      n=64      n=96      n=128     n=256     n=512     
-----------------------------------------------------------------------------------------------------------------------------------
8          0.0412    0.0647    0.1069    0.1404    0.1636    0.2409    0.3568    0.4468    0.6941    0.9475    1.905     3.8417    
16         0.0349    0.0515    0.0973    0.1271    0.1528    0.2249    0.3166    0.4308    0.6881    0.9441    1.9275    3.8542    
24         0.0349    0.0504    0.0904    0.1301    0.1591    0.2248    0.3303    0.5695    0.7403    1.0097    2.1263    4.3833    
32         0.0392    0.0562    0.1065    0.1428    0.1805    0.2526    0.3626    0.4993    0.7313    1.0131    2.0913    4.1667    
48         0.0371    0.0553    0.0962    0.1347    0.1644    0.2809    0.3388    0.4574    0.7122    0.9988    2.1113    4.25      
64         0.038     0.0555    0.0999    0.1444    0.1749    0.2979    0.6019    0.461     0.7375    1.0234    2.0837    4.2083    

========== 表2: 最优阈值矩阵（行=规模, 列=分布）==========
n       random        ascending     descending    nearlySorted  twoRuns       sawtooth      fewUniques    allSame       
------------------------------------------------------------------------------------------------------------------------
8       16(0.0478)    8(0.0125)     8(0.057)      16(0.0323)    24(0.0308)    24(0.0345)    24(0.0378)    8(0.0127)     
12      24(0.066)     8(0.018)      8(0.0988)     24(0.0295)    24(0.051)     16(0.0613)    16(0.039)     16(0.0203)    
16      24(0.1283)    16(0.025)     16(0.1585)    24(0.0753)    24(0.0753)    24(0.0915)    24(0.1055)    16(0.0248)    
20      16(0.176)     16(0.029)     16(0.205)     24(0.0925)    24(0.1065)    24(0.122)     24(0.1535)    16(0.0295)    
24      16(0.1975)    16(0.0345)    16(0.266)     32(0.092)     48(0.143)     48(0.187)     24(0.1875)    24(0.034)     
32      16(0.313)     16(0.043)     16(0.404)     48(0.0725)    16(0.2375)    24(0.28)      24(0.3045)    24(0.0445)    
48      24(0.53)      16(0.068)     16(0.24)      64(0.245)     16(0.291)     16(0.488)     16(0.489)     16(0.062)     
64      16(0.685)     16(0.082)     16(0.306)     8(0.493)      16(0.39)      24(0.674)     16(0.713)     8(0.086)      
96      16(1.1775)    8(0.1275)     8(0.46)       8(0.7275)     8(0.5825)     16(1.095)     48(1.1875)    16(0.13)      
128     16(1.6725)    16(0.1675)    8(0.605)      8(1.095)      8(0.745)      8(1.47)       8(1.5625)     8(0.1625)     
256     16(3.68)      16(0.33)      16(1.16)      16(2.27)      8(1.43)       8(2.48)       8(3.49)       8(0.31)       
512     8(7.7333)     16(0.6333)    16(2.1333)    8(4.5333)     8(2.7667)     8(4.7)        8(7.4333)     8(0.6333)     

========== 表3: 总体排名（加权平均耗时）==========
排名    阈值      平均ms        相对最优
----------------------------------------
1     16      0.7375      x1
2     8       0.7458      x1.0112
3     48      0.8031      x1.0889
4     32      0.8035      x1.0895
5     24      0.8207      x1.1129
6     64      0.8272      x1.1217

★ 推荐阈值: 16 (平均 0.7375ms)

========== 表4: 测量质量（totalMs / iters）==========
  规模 ≤ 32 的单次排序在亚毫秒级，需要累积足够的 totalMs 才有意义。
  totalMs < 10 的数据点可靠性较低。

n       iters   totalMs   ms/iter   信噪比
--------------------------------------------------
8       4000    226       0.0565    优
12      4000    311       0.0778    优
16      4000    579       0.1448    优
20      2000    393       0.1965    优
24      2000    453       0.2265    优
32      2000    675       0.3375    优
48      1000    621       0.621     优
64      1000    757       0.757     优
96      400     482       1.205     优
128     400     708       1.77      优
256     100     372       3.72      优
512     30      232       7.7333    优

断言统计: total=576, failed=0
✅ 全部断言通过
总耗时: 182165ms
============================================================
