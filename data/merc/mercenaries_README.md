# 佣兵配置文件说明 (mercenaries.json)

本文档说明如何在 `mercenaries.json` 文件中配置佣兵装备及其插件（MOD配件）。

---

## 📋 基本格式

### 装备配置字符串格式

```
装备名#强化等级#进阶名#配件1,配件2,配件3
```

### 参数说明

| 参数 | 必填 | 说明 | 示例 |
|------|------|------|------|
| **装备名** | ✅ 必填 | 装备的ID名称 | `PPK`、`黑框眼镜` |
| **强化等级** | ❌ 选填 | 装备强化等级（1-13），不填默认为1 | `5` 表示 +5 强化 |
| **进阶名** | ❌ 选填 | 装备进阶/涂装名称，留空则不使用进阶 | `二阶`、`三阶` |
| **配件列表** | ❌ 选填 | 用逗号分隔的配件名称列表，留空则不安装配件 | `弹簧,螺丝套件,小型液晶屏` |

---

## 📝 配置示例

### 示例 1：配置手枪（带配件）

```json
"secondary1": "PPK#5##弹簧,螺丝套件,小型液晶屏"
```

**解释：**
- 装备：PPK手枪
- 强化：+5
- 进阶：无（留空）
- 配件：
  - 弹簧（射速增强）
  - 螺丝套件（精度增强）
  - 小型液晶屏（瞄准增强）

---

### 示例 2：配置防具（带进阶和配件）

```json
"body": "红黑色功夫装#3#二阶#可塑式钢板,战术背带"
```

**解释：**
- 装备：红黑色功夫装
- 强化：+3
- 进阶：二阶
- 配件：
  - 可塑式钢板（防御增强）
  - 战术背带（扩展配件槽）

---

### 示例 3：配置近战武器（简单配置）

```json
"melee": "pencil#1##护手,石英磨刀石"
```

**解释：**
- 装备：铅笔（近战武器）
- 强化：+1
- 进阶：无
- 配件：
  - 护手（防护）
  - 石英磨刀石（锋利度增强）

---

### 示例 4：完整的佣兵配置

```json
{
  "level": 1,
  "name": "艾米",
  "id": 230,
  "height": 165,
  "face": 0,
  "hair": 27,
  "gender": "女",
  "equipment": {
    "head": "黑框眼镜#1##军用帆布,增效剂",
    "body": "红黑色功夫装#3#二阶#可塑式钢板,战术背带",
    "hand": "白色手套#1##防沙皮革",
    "leg": "黑灰色紧身裤#2##高耐力橡胶,不锈钢材",
    "foot": "黑色白底皮鞋#1##强力胶",
    "neck": "新手军牌",
    "primary": null,
    "secondary1": "PPK#5##弹簧,螺丝套件,小型液晶屏",
    "secondary2": "PPK#5##烈性火药,透镜",
    "melee": "pencil#1##护手,石英磨刀石",
    "grenade": "普通手雷"
  }
}
```

---

## ⚠️ 注意事项

### 1. 配件必须存在
配件必须在 `data/items/equipment_mods.xml` 的配件列表中定义，否则无法加载。

### 2. 配件类型匹配
配件的 `<use>` 标签必须包含该装备类型：
- 手枪配件只能用于手枪
- 近战配件只能用于近战武器
- 防具配件只能用于对应部位的防具

### 3. 配件槽位限制
配件数量不能超过装备的配件槽位数：
- 默认：3个配件槽
- 可通过特定配件（如"战术背带"）扩展槽位数

### 4. 配件标签冲突
同一 `tag` 的配件不能同时装备。例如：
- ❌ 不能同时装备 "骨芯颅印" 和 "辅助握持板"（它们有相同的冲突 tag）

### 5. 进阶参数占位符
**重要：** 当第三个参数（进阶）留空时，**必须保留两个 `#` 号**：

✅ **正确：**
```json
"secondary1": "PPK#5##弹簧,螺丝套件"
```

❌ **错误：**
```json
"secondary1": "PPK#5#弹簧,螺丝套件"
```

---

## 🔧 快速参考

### 只配置装备名（使用默认强化等级）
```json
"head": "黑框眼镜"
```

### 配置装备名 + 强化等级
```json
"body": "红黑色功夫装#3"
```

### 配置装备名 + 强化 + 进阶
```json
"body": "红黑色功夫装#3#二阶"
```

### 配置装备名 + 强化 + 配件（无进阶）
```json
"secondary1": "PPK#5##弹簧,螺丝套件"
```

### 完整配置（装备名 + 强化 + 进阶 + 配件）
```json
"body": "红黑色功夫装#3#二阶#可塑式钢板,战术背带"
```

---

## 📚 相关文件

- **佣兵数据配置：** `data/merc/mercenaries.json`
- **配件定义文件：** `data/items/equipment_mods.xml`
- **佣兵系统代码：** `scripts/逻辑系统分区/佣兵系统_兼容.as`
- **装备解析代码：** `scripts/类定义/org/flashNight/arki/item/BaseItem.as`

---

## 💡 提示

1. 编辑 JSON 文件时注意保持正确的 JSON 语法（引号、逗号、括号等）
2. 可以使用在线 JSON 验证器检查文件格式是否正确
3. 配件名称必须精确匹配 XML 文件中的定义（区分大小写）
4. 如需查看所有可用配件，请参阅 `equipment_mods.xml` 文件
