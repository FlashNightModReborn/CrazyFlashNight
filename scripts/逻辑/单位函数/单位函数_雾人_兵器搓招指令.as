import org.flashNight.arki.spatial.move.*;
import org.flashNight.arki.item.*;
import org.flashNight.arki.unit.Action.Skill.*;

/**
 * 搓招执行返回值常量：
 * 0 - 未执行（条件不满足）
 * 1 - DFA识别执行
 * 2 - 帧检查执行（旧逻辑兜底）
 */

_root.技能函数.后摇可跳跃 = function():Boolean {
	var 自机 = _parent;
	if(!自机.飞行浮空 && 自机.动作B) {
		自机.状态改变("兵器跳");
		return true;
	}
	return false;
};

_root.技能函数.使用剑气释放 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.刀剑攻击;
	if(!技能 || 技能.等级 < 3) return 0;

	// DFA优先
	if(自机.当前搓招名 == "剑气释放") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "剑气释放");
		return _root.技能函数.搓招监控("剑气释放", 1);
	}

	// 帧检查兜底：下前A
	if(!自机.当前搓招名 && 自机.下行 && 自机.动作A) {
		var 按前 = (自机.方向 == "右") ? 自机.右行 : 自机.左行;
		if(按前) {
			_root.兵器攻击路由.兵器攻击标签跳转(自机, "剑气释放");
			return _root.技能函数.搓招监控("剑气释放", 2);
		}
	}
	return 0;
};

_root.技能函数.使用飞沙走石 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.刀剑攻击;
	if(!技能 || 技能.等级 < 3) return 0;

	// DFA优先
	if(自机.当前搓招名 == "飞沙走石") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "飞沙走石");
		return _root.技能函数.搓招监控("飞沙走石", 1);
	}

	// 帧检查兜底：下前A
	if(!自机.当前搓招名 && 自机.下行 && 自机.动作A) {
		var 按前 = (自机.方向 == "右") ? 自机.右行 : 自机.左行;
		if(按前) {
			_root.兵器攻击路由.兵器攻击标签跳转(自机, "飞沙走石");
			return _root.技能函数.搓招监控("飞沙走石", 2);
		}
	}
	return 0;
};

_root.技能函数.判定剑气或飞沙 = function():Number {
	var 自机 = _parent;
	var 类型 = 自机.兵器动作类型;
	if(类型 == "长柄" || 类型 == "长枪" || 类型 == "长棍" || 类型 == "狂野" || 类型 == "大剑" || 类型 == "镰刀") {
		return _root.技能函数.使用飞沙走石();
	}
	return _root.技能函数.使用剑气释放();
};

_root.技能函数.使用贯穿突刺 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.刀剑攻击;
	if(!技能 || 技能.等级 < 2 || 自机.上行 || 自机.下行 || 自机.动作A) return 0;
	
	var 面右 = (自机.方向 == "右");
	var 按后 = (自机.方向 == "右") ? 自机.左行 : 自机.右行;

	// DFA优先
	if(自机.当前搓招名 == "贯穿突刺") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "贯穿突刺");
		return _root.技能函数.搓招监控("贯穿突刺", 1);
	}

	// 帧检查兜底：双击前
	if(!自机.当前搓招名) {
		var 双击前 = 面右 ? (自机.doubleTapRunDirection == 1) : (自机.doubleTapRunDirection == -1);
		if(双击前 && !按后) {
			_root.兵器攻击路由.兵器攻击标签跳转(自机, "贯穿突刺");
			return _root.技能函数.搓招监控("贯穿突刺", 2);
		}
	}
	return 0;
};

_root.技能函数.使用蓄力重劈 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.下劈;
	if(!技能 || 技能.等级 < 1 || 自机.左行 || 自机.右行) return 0;

	// DFA优先
	if(自机.当前搓招名 == "蓄力重劈") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "蓄力重劈");
		return _root.技能函数.搓招监控("蓄力重劈", 1);
	}

	// 帧检查兜底：Shift+下+A
	if(!自机.当前搓招名 && Key.isDown(_root.奔跑键) && 自机.下行 && 自机.动作A) {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "蓄力重劈");
		return _root.技能函数.搓招监控("蓄力重劈", 2);
	}
	return 0;
};

_root.技能函数.使用月光斩 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.上挑;
	if(!技能 || 技能.等级 < 4 || 自机.左行 || 自机.右行 || 自机.动作C) return 0;

	// DFA优先
	if(自机.当前搓招名 == "月光斩") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "月光斩");
		return _root.技能函数.搓招监控("月光斩", 1);
	}

	// 帧检查兜底：上A
	if(!自机.当前搓招名 && 自机.上行 && 自机.动作A) {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "月光斩");
		return _root.技能函数.搓招监控("月光斩", 2);
	}
	return 0;
};

_root.技能函数.使用全垒打 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.上挑;
	if(!技能 || 技能.等级 < 4 || 自机.左行 || 自机.右行 || 自机.动作C) return 0;

	// DFA优先
	if(自机.当前搓招名 == "全垒打") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "全垒打");
		return _root.技能函数.搓招监控("全垒打", 1);
	}

	// 帧检查兜底：上A
	if(!自机.当前搓招名 && 自机.上行 && 自机.动作A) {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "全垒打");
		return _root.技能函数.搓招监控("全垒打", 2);
	}
	return 0;
};

_root.技能函数.判定月光斩或全垒打 = function():Number {
	var 自机 = _parent;
	var 类型 = 自机.兵器动作类型;
	if(类型 == "长柄" || 类型 == "长枪" || 类型 == "长棍" || 类型 == "狂野" || 类型 == "大剑") {
		return _root.技能函数.使用全垒打();
	}
	return _root.技能函数.使用月光斩();
};

_root.技能函数.使用次元斩 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.刀剑空中连招;
	if(!技能 || 技能.等级 < 4 || 自机.左行 || 自机.右行 || 自机.动作A) return 0;

	// DFA优先
	if(自机.当前搓招名 == "次元斩") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "次元斩");
		return _root.技能函数.搓招监控("次元斩", 1);
	}

	// 帧检查兜底：下C
	if(!自机.当前搓招名 && 自机.下行 && 自机.动作C) {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "次元斩");
		return _root.技能函数.搓招监控("次元斩", 2);
	}
	return 0;
};

_root.技能函数.使用追地祀 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.刀剑空中连招;
	if(!技能 || 技能.等级 < 4 || 自机.左行 || 自机.右行 || 自机.动作A) return 0;

	// DFA优先
	if(自机.当前搓招名 == "追地祀") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "追地祀");
		return _root.技能函数.搓招监控("追地祀", 1);
	}

	// 帧检查兜底：下C
	if(!自机.当前搓招名 && 自机.下行 && 自机.动作C) {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "追地祀");
		return _root.技能函数.搓招监控("追地祀", 2);
	}
	return 0;
};

_root.技能函数.判定次元斩或追地祀 = function():Number {
	var 自机 = _parent;
	var 类型 = 自机.兵器动作类型;
	if(类型 == "长柄" || 类型 == "长枪" || 类型 == "长棍" || 类型 == "狂野" || 类型 == "大剑" || 类型 == "镰刀") {
		return _root.技能函数.使用追地祀();
	}
	return _root.技能函数.使用次元斩();
};

_root.技能函数.使用粉碎切割 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.上挑;
	if(!技能 || 技能.等级 < 2 || 自机.左行 || 自机.右行 || 自机.动作A) return 0;

	// DFA优先
	if(自机.当前搓招名 == "粉碎切割") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "粉碎切割");
		return _root.技能函数.搓招监控("粉碎切割", 1);
	}

	// 帧检查兜底：上A
	if(!自机.当前搓招名 && 自机.上行 && 自机.动作C) {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "粉碎切割");
		return _root.技能函数.搓招监控("粉碎切割", 2);
	}
	return 0;
};

_root.技能函数.使用猎影十字 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.下劈;
	if(!技能 || 技能.等级 < 3 || 自机.动作C || 自机.上行) return 0;

	// DFA优先
	if(自机.当前搓招名 == "猎影十字") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "猎影十字");
		return _root.技能函数.搓招监控("猎影十字", 1);
	}
	
	// 帧检查兜底：下A
	if(!自机.当前搓招名 && 自机.下行 && 自机.动作A) {
		var 按后 = (自机.方向 == "右") ? 自机.左行 : 自机.右行;
		var 按前 = (自机.方向 == "右") ? 自机.右行 : 自机.左行;
		if(按后 && !按前) {
			_root.兵器攻击路由.兵器攻击标签跳转(自机, "猎影十字");
			return _root.技能函数.搓招监控("猎影十字", 2);
		}
	}
	return 0;
};

_root.技能函数.使用空坠强袭 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.下劈;
	if(!技能 || 技能.等级 < 3 || 自机.动作C || 自机.上行) return 0;

	// DFA优先
	if(自机.当前搓招名 == "空坠强袭") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "空坠强袭");
		return _root.技能函数.搓招监控("空坠强袭", 1);
	}
	
	// 帧检查兜底：下A
	if(!自机.当前搓招名 && 自机.下行 && 自机.动作A) {
		var 按后 = (自机.方向 == "右") ? 自机.左行 : 自机.右行;
		var 按前 = (自机.方向 == "右") ? 自机.右行 : 自机.左行;
		if(按后 && !按前) {
			_root.兵器攻击路由.兵器攻击标签跳转(自机, "空坠强袭");
			return _root.技能函数.搓招监控("空坠强袭", 2);
		}
	}
	return 0;
};

_root.技能函数.判定影十字或空坠袭 = function():Number {
	var 自机 = _parent;
	var 类型 = 自机.兵器动作类型;
	if(类型 == "长柄" || 类型 == "长枪" || 类型 == "长棍" || 类型 == "狂野" || 类型 == "大剑") {
		return _root.技能函数.使用空坠强袭();
	}
	return _root.技能函数.使用猎影十字();
};

_root.技能函数.使用十六夜月华 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.上挑;
	if(!技能 || 技能.等级 < 3 || 自机.动作C || 自机.上行 || 自机.下行) return 0;

	// DFA优先
	if(自机.当前搓招名 == "十六夜月华") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "十六夜月华");
		return _root.技能函数.搓招监控("十六夜月华", 1);
	}

	// 帧检查兜底：后A
	if(!自机.当前搓招名 && 自机.动作A) {
		var 按后 = (自机.方向 == "右") ? 自机.左行 : 自机.右行;
		var 按前 = (自机.方向 == "右") ? 自机.右行 : 自机.左行;
		if(按后 && !按前) {
			_root.兵器攻击路由.兵器攻击标签跳转(自机, "十六夜月华");
			return _root.技能函数.搓招监控("十六夜月华", 2);
		}
	}
	return 0;
};

_root.技能函数.使用日曜三段突 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.上挑;
	if(!技能 || 技能.等级 < 3 || 自机.动作C || 自机.上行 || 自机.下行) return 0;

	// DFA优先
	if(自机.当前搓招名 == "日曜三段突") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "日曜三段突");
		return _root.技能函数.搓招监控("日曜三段突", 1);
	}

	// 帧检查兜底：后A
	if(!自机.当前搓招名 && 自机.动作A) {
		var 按后 = (自机.方向 == "右") ? 自机.左行 : 自机.右行;
		var 按前 = (自机.方向 == "右") ? 自机.右行 : 自机.左行;
		if(按后 && !按前) {
			_root.兵器攻击路由.兵器攻击标签跳转(自机, "日曜三段突");
			return _root.技能函数.搓招监控("日曜三段突", 2);
		}
	}
	return 0;
};

_root.技能函数.使用千山破晓钟 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.上挑;
	if(!技能 || 技能.等级 < 3 || 自机.动作C || 自机.上行 || 自机.下行) return 0;

	// DFA优先
	if(自机.当前搓招名 == "千山破晓钟") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "千山破晓钟");
		return _root.技能函数.搓招监控("千山破晓钟", 1);
	}

	// 帧检查兜底：后A
	if(!自机.当前搓招名 && 自机.动作A) {
		var 按后 = (自机.方向 == "右") ? 自机.左行 : 自机.右行;
		var 按前 = (自机.方向 == "右") ? 自机.右行 : 自机.左行;
		if(按后 && !按前) {
			_root.兵器攻击路由.兵器攻击标签跳转(自机, "千山破晓钟");
			return _root.技能函数.搓招监控("千山破晓钟", 2);
		}
	}
	return 0;
};

_root.技能函数.判定月华分支 = function():Number {
	var 自机 = _parent;
	var 类型 = 自机.兵器动作类型;
	if(类型 == "狂野" || 类型 == "大剑") {
		return _root.技能函数.使用千山破晓钟();
	}
	if(类型 == "长柄" || 类型 == "长枪" || 类型 == "长棍") {
		return _root.技能函数.使用日曜三段突();
	}
	return _root.技能函数.使用十六夜月华();
};

_root.技能函数.使用百万突刺 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.下劈;
	if(!技能 || 技能.等级 < 2 || 自机.动作C || 自机.上行 || 自机.下行) return 0;

	// DFA优先
	if(自机.当前搓招名 == "百万突刺") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "百万突刺");
		return _root.技能函数.搓招监控("百万突刺", 1);
	}

	// 帧检查兜底：Shift前A
	if(!自机.当前搓招名 && Key.isDown(_root.奔跑键)  && 自机.动作A) {
		var 按后 = (自机.方向 == "右") ? 自机.左行 : 自机.右行;
		var 按前 = (自机.方向 == "右") ? 自机.右行 : 自机.左行;
		if(!按后 && 按前) {
			_root.兵器攻击路由.兵器攻击标签跳转(自机, "百万突刺");
			return _root.技能函数.搓招监控("百万突刺", 2);
		}
	}
	return 0;
};

_root.技能函数.使用幻影剑舞 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.下劈;
	if(!技能 || 技能.等级 < 4 || 自机.动作A || 自机.上行 || 自机.下行) return 0;

	// DFA优先
	if(自机.当前搓招名 == "幻影剑舞") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "幻影剑舞");
		return _root.技能函数.搓招监控("幻影剑舞", 1);
	}

	// 帧检查兜底：Shift前C
	if(!自机.当前搓招名 && Key.isDown(_root.奔跑键)  && 自机.动作C) {
		var 按后 = (自机.方向 == "右") ? 自机.左行 : 自机.右行;
		var 按前 = (自机.方向 == "右") ? 自机.右行 : 自机.左行;
		if(!按后 && 按前) {
			_root.兵器攻击路由.兵器攻击标签跳转(自机, "幻影剑舞");
			return _root.技能函数.搓招监控("幻影剑舞", 2);
		}
	}
	return 0;
};

_root.技能函数.使用见切 = function():Number {
	var 自机 = _parent;
	var 技能 = 自机.被动技能.上挑;
	
	var 面右 = (自机.方向 == "右");
	var 不按前 = 面右 ? !自机.右行 : !自机.左行;
	
	if(!技能 || 技能.等级 < 1 || 自机.动作A || 自机.上行 || 自机.下行) return 0;

	// DFA优先
	if(自机.当前搓招名 == "见切") {
		_root.兵器攻击路由.兵器攻击标签跳转(自机, "见切后撤");
		return _root.技能函数.搓招监控("见切", 1);
	}

	// 帧检查兜底：Shift+后且不按前
	if(!自机.当前搓招名 && 不按前 && Key.isDown(_root.奔跑键)) {
		var 按后 = 面右 ? 自机.左行 : 自机.右行;
		if(按后) {
			_root.兵器攻击路由.兵器攻击标签跳转(自机, "见切后撤");
			return _root.技能函数.搓招监控("见切", 2);
		}
	}
	return 0;
};


_root.技能函数.轻型武器攻击搓招 = function():Number {
	var r:Number = _root.技能函数.判定月华分支()
		|| _root.技能函数.判定影十字或空坠袭()
		|| _root.技能函数.判定次元斩或追地祀()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.判定剑气或飞沙()
		|| _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.使用粉碎切割()
		|| _root.技能函数.使用见切();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};

_root.技能函数.大型武器攻击搓招 = function():Number {
	var r:Number = _root.技能函数.判定月华分支()
		|| _root.技能函数.判定影十字或空坠袭()
		|| _root.技能函数.判定次元斩或追地祀()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.判定剑气或飞沙()
		|| _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.使用粉碎切割()
		|| _root.技能函数.使用见切();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};

_root.技能函数.剑气释放搓招窗口 = function():Number {
	var r:Number = _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.判定影十字或空坠袭()
		|| _root.技能函数.判定次元斩或追地祀()
		|| _root.技能函数.判定月华分支()
		|| _root.技能函数.使用粉碎切割()
		|| _root.技能函数.使用见切();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};

_root.技能函数.飞沙走石搓招窗口 = function():Number {
	var r:Number = _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.判定影十字或空坠袭()
		|| _root.技能函数.判定次元斩或追地祀()
		|| _root.技能函数.判定月华分支()
		|| _root.技能函数.使用粉碎切割()
		|| _root.技能函数.使用见切();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};

_root.技能函数.贯穿突刺搓招窗口 = function():Number {
	var r:Number = _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.判定月华分支()
		|| _root.技能函数.判定剑气或飞沙()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.判定次元斩或追地祀()
		|| _root.技能函数.判定影十字或空坠袭()
		|| _root.技能函数.使用粉碎切割()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.使用见切();
	if(!r) {
		// 双击前转跑
		var 自机 = _parent;
		var 面右 = (自机.方向 == "右");
		var 双击前 = 面右 ? (自机.doubleTapRunDirection == 1) : (自机.doubleTapRunDirection == -1);
		if(双击前) 自机.状态改变("兵器跑");
		else _root.技能函数.后摇可跳跃();
	}
	return r;
};

_root.技能函数.蓄力重劈搓招窗口 = function():Number {
	var r:Number = _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.判定月华分支()
		|| _root.技能函数.判定剑气或飞沙()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.判定影十字或空坠袭()
		|| _root.技能函数.判定次元斩或追地祀()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.使用粉碎切割()
		|| _root.技能函数.使用见切();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};

_root.技能函数.十六夜月华可派生 = function():Number {
	var r:Number = _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.判定月华分支()
		|| _root.技能函数.判定剑气或飞沙()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.判定影十字或空坠袭()
		|| _root.技能函数.判定次元斩或追地祀()
		|| _root.技能函数.使用粉碎切割()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.使用见切();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};

_root.技能函数.幻影剑舞可派生 = function():Number {
	var r:Number = _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.判定月华分支()
		|| _root.技能函数.判定剑气或飞沙()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.判定影十字或空坠袭()
		|| _root.技能函数.判定次元斩或追地祀()
		|| _root.技能函数.使用粉碎切割()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用见切();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};

_root.技能函数.猎影十字可派生 = function():Number {
	var r:Number = _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.判定月华分支()
		|| _root.技能函数.判定剑气或飞沙()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.判定次元斩或追地祀()
		|| _root.技能函数.使用粉碎切割()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.使用见切();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};

_root.技能函数.空坠强袭可派生 = function():Number {
	var r:Number = _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.判定月华分支()
		|| _root.技能函数.判定剑气或飞沙()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.判定次元斩或追地祀()
		|| _root.技能函数.使用粉碎切割()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.使用见切();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};

_root.技能函数.百万突刺可派生 = function():Number {
	var r:Number = _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.判定月华分支()
		|| _root.技能函数.判定剑气或飞沙()
		|| _root.技能函数.判定影十字或空坠袭()
		|| _root.技能函数.判定次元斩或追地祀()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.使用粉碎切割()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.使用见切();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};

_root.技能函数.粉碎切割可派生 = function():Number {
	var r:Number = _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.判定月华分支()
		|| _root.技能函数.判定剑气或飞沙()
		|| _root.技能函数.判定影十字或空坠袭()
		|| _root.技能函数.判定次元斩或追地祀()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.使用见切();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};

_root.技能函数.月光斩可派生 = function():Number {
	var r:Number = _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.判定月华分支()
		|| _root.技能函数.判定剑气或飞沙()
		|| _root.技能函数.判定影十字或空坠袭()
		|| _root.技能函数.判定次元斩或追地祀()
		|| _root.技能函数.使用粉碎切割()
		|| _root.技能函数.使用见切();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};

_root.技能函数.见切可派生 = function():Number {
	var r:Number = _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.判定月华分支()
		|| _root.技能函数.判定剑气或飞沙()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.判定影十字或空坠袭()
		|| _root.技能函数.判定次元斩或追地祀()
		|| _root.技能函数.使用粉碎切割();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};

_root.技能函数.次元斩可派生 = function():Number {
	var r:Number = _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.判定月华分支()
		|| _root.技能函数.判定剑气或飞沙()
		|| _root.技能函数.判定影十字或空坠袭()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.使用粉碎切割()
		|| _root.技能函数.使用见切();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};

_root.技能函数.追地祀可派生 = function():Number {
	var r:Number = _root.技能函数.使用蓄力重劈()
		|| _root.技能函数.使用贯穿突刺()
		|| _root.技能函数.使用百万突刺()
		|| _root.技能函数.使用幻影剑舞()
		|| _root.技能函数.判定月华分支()
		|| _root.技能函数.判定剑气或飞沙()
		|| _root.技能函数.判定影十字或空坠袭()
		|| _root.技能函数.判定月光斩或全垒打()
		|| _root.技能函数.使用粉碎切割()
		|| _root.技能函数.使用见切();
	if(!r) _root.技能函数.后摇可跳跃();
	return r;
};
