# AS2 性能特性与优化指引

> 本项目在 `scripts/优化随笔/` 下积累了 24 篇深度 AS2 性能研究。
> 本文档提供分类索引与关键结论摘要，用于在性能敏感场景下快速查阅。

---

## 1. 索引：按主题分类

### 位运算与底层优化
| 文件 | 主题 |
|------|------|
| `AS2 中 Number 类型的位运算与内存优化.md` | Number 类型的位运算特性 |
| `位运算加速.md` | 位运算替代常规算术的加速方案 |
| `字符串下的位运算表现.md` | 字符串与位运算的交互性能 |
| `ActionScript 2 (AS2) 分支预测性能试验技术总结.md` | 分支预测对性能的影响 |
| `分支预测视角下的优化指引.md` | 基于分支预测的优化决策指引 |
| `ActionScript 2  标志位组合算法性能微基准实验报告.md` | 标志位组合算法的基准测试 |
| `ActionScript 2 中 NaN-Boxing 技术评估报告.md` | NaN-Boxing 技术可行性评估 |

### 循环与迭代
| 文件 | 主题 |
|------|------|
| `循环展开优化因子的选择测试.md` | 循环展开的最优因子 |
| `for in 循环性能优化尝试.md` | for...in 循环的性能特性 |
| `ActionScript 2.0 for...in 循环中动态修改对象属性的安全性及行为特性研究报告.md` | for...in 中动态修改的安全性 |
| `数组填充移除性能测试评估.md` | 数组操作的性能评估 |

### 运算与表达式
| 文件 | 主题 |
|------|------|
| `运算符性能测试评估.md` | 各运算符的性能对比 |
| `逻辑运算符性能测试评估.md` | 逻辑运算符的性能特性 |
| `交换变量的性能评估.md` | 变量交换的最优方式 |
| `对降低abs取绝对值操作开销的探索.md` | Math.abs 替代方案 |
| `对降低floor取整操作开销的探索.md` | Math.floor 替代方案 |

### 字符串与对象
| 文件 | 主题 |
|------|------|
| `字符串性能评估.md` | 字符串操作的性能特性 |
| `分析 AS2 中对象属性的哈希函数实现.md` | 对象属性哈希机制分析 |
| `原型链注入的性能评估.md` | 原型链注入对性能的影响 |

### 运行时与内存
| 文件 | 主题 |
|------|------|
| `EnterFrame事件的性能分析报告.md` | EnterFrame 事件的性能开销 |
| `as2环境下的缓存命中优化评估.md` | 缓存命中率优化策略 |
| `异常兜底措施的性能评估与优化.md` | try-catch 的性能影响 |

### 求值顺序与副作用（黑魔法）
| 文件 | 主题 |
|------|------|
| `scripts/类定义/org/flashNight/naki/Sort/evalorder.md` | AS2 求值顺序规则文档 |
| `scripts/类定义/org/flashNight/naki/Sort/EvalOrderTest.as` | 求值顺序验证测试 |

> 注：`evalorder.md` 记录的是求值顺序本身的规则。副作用压行触发寄存器优化的性能收益来自长期工程实践验证，非单一基准测试。

### 综合与工程
| 文件 | 主题 |
|------|------|
| `对as2本身一些性能优化点的测试探索.md` | 综合性能优化探索 |
| `GitHub项目瘦身记录.md` | 仓库体积优化 |

---

## 2. 关键性能结论摘要

<!-- TODO: 逐步从各篇笔记中提炼一行结论，填充此处 -->
<!-- 格式：▸ [主题] — [关键结论] -->

> 此节在自优化环节中逐步填充。每次阅读优化随笔时，在此追加一行摘要。

---

## 3. 优化决策快查表

<!-- TODO: 从性能研究中继续提炼常用决策规则 -->

| 场景 | 推荐方案 | 依据 |
|------|----------|------|
| 多步计算需要临时变量 | 利用副作用语句压行，触发 VM 使用寄存器加速 | `evalorder.md`：现代 CPU 寄存器充足，副作用压行比拆分为多条语句更快 |
| 字符串拼接 | 裸 `+` 拼接，不用 `Array.join()` | `字符串性能评估.md` |
| 取绝对值 | 位运算替代 `Math.abs()` | `对降低abs取绝对值操作开销的探索.md` |
| 取整 | 位运算替代 `Math.floor()` | `对降低floor取整操作开销的探索.md` |

---

## 4. 使用说明

- 在编写性能敏感代码时，先检查本文档是否有相关主题的研究
- 如有，进入 `scripts/优化随笔/` 阅读完整研究报告后再做决策
- 新的性能发现应按照 `agentsDoc/self-optimization.md` 流程归档
