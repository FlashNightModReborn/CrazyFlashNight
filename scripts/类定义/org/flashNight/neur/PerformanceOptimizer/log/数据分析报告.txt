================================================================================
  PerformanceOptimizer 数据分析报告
  测试版本: 2026-02 (低端机配置 · 堕落城保卫战 + 多档位开环阶跃响应)
  数据文件: fs_开环阶跃响应.csv, fs_堕落城保卫战测试.csv
  Method B (测量/保持解耦) 修复后首次完整低端机测定
================================================================================

目录
────
  1. 测试条件
  2. 开环阶跃响应分析（多档位系统辨识）
  3. 闭环战斗测试分析
  4. PID 工程行为分析
  5. 挡位有效性评估
  6. 关键结论与建议
  7. Method B 修复验证
  8. 与前次测试 (无名氏) 对比

================================================================================
1. 测试条件
================================================================================

【开环阶跃响应 (fs_开环阶跃响应.csv)】
  测试方法: sysid 作弊码启用开环模式，逐档位锁定阶跃响应
  测试路径: L0 → L1 → L2 → L3 → L2 → L1 → L0（前向+逆向全覆盖）
  持续时间: 355.7 秒 (3159391ms ~ 3515085ms)
  采样记录: 117 条 SAMPLE (evt=1)，分 7 段
  改进: 本次覆盖全部 4 个档位的正向与逆向阶跃响应，
        前次测试仅有 L0 单档位

【闭环战斗测试 (fs_堕落城保卫战测试.csv)】
  测试场景: 堕落城保卫战 (data\stages\基地车库\堕落城保卫战.xml)
  场景特点: 周期性刷怪(wave-based)，性能预算周期性变化
  控制模式: 全闭环 + 前馈控制（战前手动预设 L2）
  持续时间: 345.5 秒 (67472ms ~ 412939ms) ≈ 5 分 46 秒
  采样记录: 195 条 SAMPLE, 25 次挡位切换, 1 次手动设置, 5 次场景切换
  PID 参数: Kp=0.25, Ki=0.5, Kd=-30, integralMax=3, derivativeFilter=0.2
            (从 PID 数据反推验证: P/error = 0.2061/0.8244 = 0.2500 ✓)

================================================================================
2. 开环阶跃响应分析（多档位系统辨识）
================================================================================

本次开环测试采用「前向阶跃 + 逆向阶跃」全路径覆盖，
可交叉验证各档位稳态 FPS 并部分抵消负载漂移。

【各段 FPS 统计（全部样本）】

  ┌──────────┬──────┬───────┬───────┬───────┬───────┬────────────┐
  │ 测试段   │ 样本 │ 均值  │ 中位数 │ 最小  │ 最大  │ 采样间隔   │
  ├──────────┼──────┼───────┼───────┼───────┼───────┼────────────┤
  │ OL:0>0   │ 30   │ 17.2  │ 16.8  │ 11.2  │ 22.6  │ ~1.7s (L0) │
  │ OL:0>1   │ 15   │ 16.9  │ 17.1  │ 13.8  │ 18.9  │ ~3.5s (L1) │
  │ OL:1>2   │ 10   │ 20.2  │ 19.7  │ 18.3  │ 23.6  │ ~4.7s (L2) │
  │ OL:2>3   │  7   │ 19.5  │ 19.4  │ 19.0  │ 20.3  │ ~6.2s (L3) │
  │ OL:3>2   │ 10   │ 20.1  │ 20.0  │ 18.0  │ 23.8  │ ~4.1s (L2) │
  │ OL:2>1   │ 15   │ 16.6  │ 16.2  │ 14.9  │ 19.1  │ ~3.6s (L1) │
  │ OL:1>0   │ 30   │ 15.4  │ 15.6  │ 10.7  │ 18.7  │ ~1.9s (L0) │
  └──────────┴──────┴───────┴───────┴───────┴───────┴────────────┘

  注: L0 前向 (17.2) 与逆向 (15.4) 存在 1.8 FPS 差异，
  原因为测试持续 ~6 分钟内负载漂移（战斗场景中敌人持续累积）。

【前向/逆向交叉验证 — 各档位稳态 FPS (K_L)】

  取前向与逆向均值的平均值，部分抵消时序漂移:

  ┌────────┬─────────────┬─────────────┬────────────────┐
  │ 档位   │ 前向 K_L    │ 逆向 K_L    │ 交叉均值 K̄_L  │
  ├────────┼─────────────┼─────────────┼────────────────┤
  │ L0     │ 17.2        │ 15.4        │ 16.3           │
  │ L1     │ 16.9        │ 16.6        │ 16.8           │
  │ L2     │ 20.2        │ 20.1        │ 20.1           │
  │ L3     │ 19.5        │ —(中间段)   │ 19.5           │
  └────────┴─────────────┴─────────────┴────────────────┘

  L1/L2 的前向与逆向高度一致 (差 ≤0.3)，说明在测试中段负载较稳定。
  L0 差异大 (1.8) 因为它位于测试两端，受负载漂移影响最大。

【档间增益差 ΔFPS_L（执行器特性 — 低端机）】

  ΔFPS₀₁ = K̄_L1 - K̄_L0 = 16.8 - 16.3 = +0.5  ← 几乎为零
  ΔFPS₁₂ = K̄_L2 - K̄_L1 = 20.1 - 16.8 = +3.3  ← 唯一显著跃变
  ΔFPS₂₃ = K̄_L3 - K̄_L2 = 19.5 - 20.1 = -0.6  ← 在噪声范围内，真值 ≈ 0

  ┌──────────────────────────────────────────────────────┐
  │ 关键发现:                                           │
  │ 在低端机上，4 档系统退化为等效 2 档:                │
  │   「正常态」L0/L1 ≈ 16~17 FPS                      │
  │   「降载态」L2/L3 ≈ 19~20 FPS                      │
  │ 唯一真正有效的降载手段仍然是 _quality=LOW (L1→L2)  │
  │ L0→L1 的特效/弹壳减少和 L2→L3 的进一步裁剪       │
  │ 对帧率几乎没有可测量的影响。                        │
  └──────────────────────────────────────────────────────┘

  与前次测试 (无名氏) 对比:
  ┌──────────┬───────────┬──────────────┐
  │ 增益差   │ 无名氏    │ 低端机(fs)   │
  ├──────────┼───────────┼──────────────┤
  │ ΔFPS₀₁  │ +1.7      │ +0.5         │
  │ ΔFPS₁₂  │ +6.1      │ +3.3         │
  │ ΔFPS₂₃  │ +3.0      │ ≈0           │
  │ 总计     │ +10.8     │ +3.8         │
  └──────────┴───────────┴──────────────┘

  低端机的总降载幅度仅为前次的 35%。
  这表明低端机的瓶颈更可能在 CPU 基础逻辑而非渲染管线，
  _quality=LOW 之外的降载手段（特效数/弹壳/面积系数）贡献极小。

【Kalman 滤波器跟踪表现】
  OL:0>0 段初始 Kalman 估计: 19.65 (偏高，来自前置状态)
  约 5~7 个采样周期 (≈10s) 收敛至实际帧率 (~17)
  与前次测试 τ_kalman ≈ 6.6s 量级一致

【被控对象时间常数 τ_plant】
  由于各档间 ΔFPS 极小 (L0≈L1, L2≈L3)，且测量噪声大 (std ≈ 2~3)，
  瞬态响应被噪声淹没，无法从本次数据中可靠提取 τ_plant。
  后续若需精确 τ，建议在更大 ΔFPS 的档位跃变 (如 L1→L2) 上
  用至少 60 秒的稳态段做拟合。

================================================================================
3. 闭环战斗测试分析
================================================================================

【总体 FPS 统计】
  样本数:  195 条 SAMPLE
  均值:    26.9 FPS
  最小值:  14.9 FPS (L1, 116193ms — 真实极端低帧，非伪影)
  最大值:  32.3 FPS (L0, 256508ms)

  与开环 L0 的 ~17 FPS 相比，闭环控制将平均 FPS 提升了约 +10 FPS (+56%)。

【各挡位采样分布】
  ┌──────┬──────────┬───────────┬──────────┬──────────────────────┐
  │ 挡位 │ 采样数   │ 驻留时间   │ 时间占比  │ 设计意图             │
  ├──────┼──────────┼───────────┼──────────┼──────────────────────┤
  │ L0   │133(68.2%)│ 149.3 秒  │ 43.6%    │ 理想挡位，最高画质    │
  │ L1   │ 29(14.9%)│  70.5 秒  │ 20.6%    │ 缓冲挡位，过渡用      │
  │ L2   │ 26(13.3%)│  89.7 秒  │ 26.2%    │ 高压挡位，团战默认     │
  │ L3   │  7 (3.6%)│  32.8 秒  │  9.6%    │ 兜底挡位，不应常驻     │
  └──────┴──────────┴───────────┴──────────┴──────────────────────┘

  注: 采样占比 ≠ 时间占比。高挡位采样周期更长 (N=frameRate×(1+level))，
  所以 L2/L3 的采样数看起来比实际驻留时间少。以驻留时间为准。

【各挡位 FPS 统计（采样时即时帧率）】
  L0: 均值 27.2  (min=15.6, max=32.3)
  L1: 均值 25.7  (min=14.9, max=30.9)
  L2: 均值 26.9  (min=16.8, max=31.0)
  L3: 均值 26.1  (min=19.8, max=29.9)

  L2 均值高于 L0/L1 的说明: 这些是在各挡位采样时的即时帧率。
  L0/L1 的低值出现在「帧率已下降、即将切档前」的样本中；
  L2/L3 的高值出现在「降载生效后、帧率已恢复」的样本中。
  均值差异反映的是采样时机，而非档位本身的稳态表现。

【平均驻留时间（单次连续段）】
  L0:  14.9 秒/段 (10 段)
  L1:  10.1 秒/段 (7 段)
  L2:  15.0 秒/段 (6 段, 含手动保持段)
  L3:  16.4 秒/段 (2 段)

【挡位切换统计 (25 次)】
  降级方向 (level 增大):
    L0→L1:  8 次  (切换时 FPS 均值 20.5, 范围 15.6~26.5)
    L0→L2:  2 次  (跳级! FPS=19.4, 19.9)
    L1→L2:  3 次  (切换时 FPS 均值 24.4, 范围 22.4~27.2)
    L1→L3:  1 次  (跳级! FPS=14.9)
    L2→L3:  1 次  (FPS=17.2)
  降级合计: 15 次

  升级方向 (level 减小):
    L1→L0:  3 次  (切换时 FPS 均值 29.7, 范围 29.2~30.1)
    L2→L0:  5 次  (切换时 FPS 均值 27.5, 范围 23.6~30.5)
    L3→L0:  2 次  (跳级恢复! FPS=29.9, 29.4)
  升级合计: 10 次

  平均切换间隔: 342.3/25 ≈ 13.7 秒/次
  (前次测试: 10.6 秒/次 → 切换频率降低 23%，稳定性提升)

【跳级行为分析 — 新发现】

  本次测试首次观测到 3 种跳级切换:

  (a) L1→L3 (116193ms, FPS=14.9):
      帧率从 26.6 骤降至 15.9→14.9 (刷怪波次启动)。
      PID 输出 2.04→2.62，round() 结果从 2 变为 3。
      由于「方向记忆」设计，降级方向计数持续累积:
      第 1 拍候选=2 (降级方向 count=1)
      第 2 拍候选=3 (仍为降级方向 count=2) → 确认阈值 2 达标 → 切换至 L3。
      结论: 方向记忆（非候选记忆）使系统在严重帧率崩塌时能快速越级降级。

  (b) L0→L2 (303742ms & 334578ms, FPS=19.4 & 19.9):
      帧率急剧下降，error ≈ 6.5，pidOutput ≈ 0.25×6.5 + 1.5 + D ≈ 3.1+D ≈ 2.5，
      round() = 2 或 3，配合前序降级方向计数 → 直接跳至 L2。
      实际效果: 跳过了几乎无效的 L1 (ΔFPS₀₁≈0)，直达有效降载档 L2。
      结论: 在低端机上，PID+量化器自动识别出 L1 无效，实现了隐式跳级优化。

  (c) L3→L0 (129471ms & 400905ms, FPS=29.9 & 29.4):
      战斗波次结束后帧率迅速恢复到 ~30 FPS，
      PID 输出大幅为负，round() = 0，连续 3 次升级确认后直接恢复 L0。
      结论: 升级方向的跳级恢复是安全的 — 帧率已完全回升时无需逐级试探。

【Ping-Pong 振荡分析 (30 秒内来回切换)】
  检测到 5 次快速振荡:

  (1) L0↔L1 at 153102/161337 (间隔 8.2s): 刷怪间歇期短暂回升
  (2) L0↔L1 at 219375/227805 (间隔 8.4s): 同上
  (3) L0↔L1 at 237107/245838 (间隔 8.7s): 与(2)连续，形成持续振荡段
  (4) L2→L0→L2 at 300402/303742 (间隔 3.3s): 过早恢复 ← 详见下方分析
  (5) L2→L0→L1→L2 at 347296/350413/355585 (总 8.3s): 阶梯式重降级

  其中 (2)(3) 构成一段 26.5 秒的持续 L0↔L1 振荡 (219375~245838ms)，
  对应战斗波次间歇期的帧率反复升降。
  由于 ΔFPS₀₁ ≈ 0，这段振荡对画面几乎无可感知影响。

  ┌──────────────────────────────────────────────────────────┐
  │ 过早恢复问题 (振荡 #4 详细分析):                        │
  │                                                          │
  │ 300402ms: L2 采样 FPS=23.6 (实际已偏低)                 │
  │   Kalman 估计 = 26.16 (滞后于真实值, 仍在 target 之上)  │
  │   → PID 输出 = -1.61 → round() = -2 → clamp = 0        │
  │   → 升级确认累积达 3 次 → 切换至 L0                     │
  │                                                          │
  │ 302192ms: L0 采样 FPS=16.8 ← 立刻暴露 L0 无法承受      │
  │ 303742ms: L0 采样 FPS=19.4 → PID 飙升 → 3.3 秒内切 L2  │
  │                                                          │
  │ 根因: Kalman 滞后 — 实际 FPS 已在下降 (28.9→23.6)，    │
  │ 但 Kalman 估计 (26.16) 仍在目标值之上,                  │
  │ 导致 PID 误判为"帧率充足,可以升级"。                    │
  │                                                          │
  │ 本质: 恒定状态 Kalman 模型在负载快速变化时的固有滞后。  │
  │ 一阶惯性模型 (x_{k+1}=a·x_k+(1-a)·K) 可改善此问题。   │
  └──────────────────────────────────────────────────────────┘

【场景切换 (evt=4) 分布】
  5 次场景切换 (波次转场): 70636, 136307, 194878, 251407, 320183
  平均波次间隔: 62.4 秒

================================================================================
4. PID 工程行为分析
================================================================================

【积分项退化为方向偏置 — 低端机再次验证】
  闭环测试 195 条采样中的 PID 细节:
  - |I| ≥ 1.49 的采样点: 190/195 = 97.4%
  - |I| < 1.49 的采样点:  5/195 =  2.6%

  未饱和的 5 个采样点出现在误差接近零的过渡瞬间:
    (81073ms) I = -0.40 — 刚从手动保持恢复，PID 重置后积分尚未饱和
    (157369ms) I = -0.56 — L1 稳定段，error ≈ 0
    (203938ms) I = -0.02 — L0 稳定段，error ≈ 0
    (268840ms) I = +0.40 — 帧率波动穿越目标值
    (329325ms) I = +0.25 — 同上

  结论: 与前次测试 (96.2%) 一致。积分项在 97%+ 的时间内处于 ±1.5 饱和，
  退化为方向偏置。在 4 档离散系统中不构成功能损失。

【Kd=-30 的阻尼效应 — 低端机验证】

  从 PID 详情数据提取 D 项范围 (evt=5 的 c 列):

  降级时段 (FPS 下降, de/dt > 0):
    D 范围: -0.54 ~ -1.28 (对 P ≈ +0.5 ~ +2.0 的部分抵消)
    典型值: D ≈ -0.9，抵消约 45% 的 P 项 → 抑制过快降级

  升级时段 (FPS 回升, de/dt < 0):
    D 范围: +0.03 ~ +0.74 (对 P ≈ -0.5 ~ -1.0 的部分抵消)
    典型值: D ≈ +0.25，抵消约 25% 的 P 项 → 延缓过快恢复

  稳态时段:
    D ≈ 0，微分项退场

  结论: 阻尼效应与前次测试量级一致 (|D| ≈ 0.25~1.0)，
  证明 Kd=-30 / deltaTime(帧数) 的缩放机制在不同机器上行为一致。

【PID 输出与量化关系】
  典型合成: u* ≈ 0.25·error ± 1.5 + D_damping

  当 FPS=17 (重压): error=9, u* ≈ 2.25 + 1.5 - 0.9 = 2.85 → round=3
  当 FPS=22 (中压): error=4, u* ≈ 1.0 + 1.5 - 0.5 = 2.0  → round=2
  当 FPS=25 (轻压): error=1, u* ≈ 0.25 + 1.5 - 0.2 = 1.55 → round=2
  当 FPS=28 (良好): error=-2, u* ≈ -0.5 - 1.5 + 0.2 = -1.8 → round=-2 → clamp=0
  当 FPS=30 (满载): error=-4, u* ≈ -1.0 - 1.5 + 0.1 = -2.4 → round=-2 → clamp=0

  → round() + clamp[0,3] 后只剩下 4 个离散值
  → 迟滞确认是最终决策的唯一门控，PID 精度不影响结果

================================================================================
5. 挡位有效性评估
================================================================================

【L0 理想挡位 — 符合设计】
  驻留时间 43.6%，平均采样 FPS 27.2。
  在刷怪间歇期稳定维持最高画质 (通常 29~31 FPS)。
  系统能积极恢复到 L0，包括从 L3 直接跳级恢复。
  评价: ★★★★★ 完全符合「理想挡位」设计意图。

【L1 缓冲挡位 — 在低端机上实际降载效果为零】
  驻留时间 20.6%，平均采样 FPS 25.7。

  关键数据:
    开环实测 ΔFPS₀₁ = +0.5 (前次 +1.7) ← 几乎无效果
    L0 与 L1 的稳态 FPS 无统计显著差异 (16.3 vs 16.8, 差 ≈ 噪声)
    L0→L1 的 8 次切换中，6 次在短时间内进一步降至 L2 或更高

  原因分析:
    L1 的降载手段 (特效 20→12, 弹壳 25→12, 面积 300K→450K) 主要针对渲染管线。
    在低端机上，CPU 基础逻辑 (碰撞检测、AI 计算等) 是真正瓶颈，
    减少特效数量对帧率几乎没有边际贡献。
    面积系数在 wave-based 战斗关卡中不参与刷怪控制，因此完全无效。

  闭环行为:
    由于 ΔFPS₀₁≈0，系统在 L0→L1 切换后帧率不改善，
    PID 持续输出高值 → 迅速确认进一步降级 → L1 被快速穿越至 L2。
    2 次 L0→L2 跳级即为此行为的极端表现 — PID 直接跳过 L1。

  评价: ★★☆☆☆ 在低端机上降载效果几乎为零。作为 L0↔L2 的过渡缓冲仍有
  理论价值（避免画质直接跳变），但实际贡献极小。

【L2 高压挡位 — 战斗核心，在低端机上仍然有效】
  驻留时间 26.2%，平均采样 FPS 26.9。

  _quality=LOW 仍然是唯一显著的降载手段:
    开环实测 ΔFPS₁₂ = +3.3 (前次 +6.1)
    降载效果虽然弱于前次测试，但仍是唯一提供可测量 FPS 提升的档位跃变。

  闭环行为:
    在持续战斗中，系统倾向于稳定在 L2。
    最长连续 L2 驻留: 25.8 秒 (355585~381366ms, 重压阶段)
    在此期间 FPS 从 29.3 逐步下降至 16.8，最终触发进一步降级至 L3。

  评价: ★★★★☆ 仍然是最重要的降载档位，但在低端机上效力减半。

【L3 兜底挡位 — 在低端机上效果有限】
  驻留时间 9.6%，出现 2 段，平均驻留 16.4 秒。

  关键数据:
    开环实测 ΔFPS₂₃ ≈ 0 (前次 +3.0) ← 在低端机上几乎无额外降载
    K_L3 ≈ 19.5 vs K_L2 ≈ 20.1，差异在测量噪声范围内

  原因分析:
    L2→L3 的额外手段 (特效 10→0, 发射效果 5→0, 面积 600K→3M) 在低端机上
    同样受限于 CPU 瓶颈而非渲染管线。
    _quality 在 L2 和 L3 均为 LOW，因此最大的降载手段没有增量。

  闭环行为:
    第一次 L3 段 (116193~129471, 13.3s): 由 L1→L3 跳级触发，
      FPS 从 14.9 恢复至 29.9 后迅速跳回 L0。
    第二次 L3 段 (381366~400905, 19.5s): 持续重压段尾部，
      FPS 从 17.2 缓慢恢复 (19.8→26.3→24.7→29.4)，最终跳回 L0。

  评价: ★★☆☆☆ 在低端机上与 L2 几乎无差异，作为安全网仍有限值。

================================================================================
6. 关键结论与建议
================================================================================

【系统整体评估: 在低端机上仍然有效】
  ┌───────────────────────────────────────────────────────────┐
  │ 无控制系统: ~17 FPS (不可玩)                             │
  │ 有控制系统: 26.9 FPS 平均 (可玩)                         │
  │ FPS 提升:   +56%                                         │
  │ 切换频率:   13.7 秒/次 (玩家基本无感知)                  │
  │ Ping-pong:  5 次 (3 次 L0↔L1 无感知, 2 次涉及画质跳变) │
  │ 跳级行为:   5 次 (全部为合理的快速响应)                  │
  │ 测量伪影:   0 次 (Method B 修复验证通过)                 │
  └───────────────────────────────────────────────────────────┘

【低端机特有的发现】

  1. 4 档退化为等效 2 档
     L0≈L1, L2≈L3 的稳态 FPS 无显著差异。
     有效自由度仅为 _quality 这一个维度 (preset vs LOW)。
     其他降载手段 (特效/弹壳/面积) 在 CPU 瓶颈下无边际贡献。

  2. 系统自动适应了退化
     PID+量化器通过产生高 round() 值，自动跳过了无效的 L1，
     直达有效的 L2。这不是设计时预见到的行为，而是系统的
     「涌现性」— 连续 PID 输出 + 离散量化的组合自然实现了跳级。

  3. 降载天花板较低
     全部 4 级降载仅提供 ~+4 FPS (vs 前次 +10.8)。
     这意味着在极端压力下 (如连续高压段 355~400 秒)，
     即使系统在 L3，FPS 仍可能低于 20。
     这是硬件能力的物理极限，非控制策略可解决。

【无需调整 PID 参数 — 理由同前次测试】
  1. 积分退化(97.4%)在 4 档系统中不构成损失
  2. Kd=-30 阻尼效应在低端机上量级一致 (|D|≈0.25~1.0)
  3. round()+迟滞量化器是稳定性的主要保障，PID 精度不是瓶颈
  4. Kp=0.25 对应隐含假设「一档 ≈ 4 FPS」：
     在低端机上 ΔFPS₁₂=3.3 与此吻合，Kp 值合理

【改进建议（按优先级排序）】

  优先级 1: 场景前馈
    堕落城保卫战等 wave-based 关卡的刷怪时机是已知的。
    在刷怪脚本触发前预切至 L2，可避免 2~4 秒的 FPS 低谷。
    接口已就绪 (setPerformanceLevel)，缺的是关卡脚本回调。

  优先级 2: L1 在低端机上的角色重新定义
    方案 A: 为 L1 增加一个 CPU 侧降载手段（如降低 AI 更新频率）
    方案 B: 在检测到 ΔFPS₀₁≈0 时自适应跳过 L1（需要在线辨识）
    方案 C: 维持现状 — 系统已通过跳级自动适应，无需改动

  优先级 3: Kalman 滞后缓解
    过早恢复问题（振荡 #4）源于 Kalman 估计滞后。
    方案 A: 升级确认次数从 3 增至 4（简单，增加恢复延迟约 1 个采样周期）
    方案 B: 在 Kalman 估计斜率为负时抑制升级决策（需计算 Δŷ/Δt）
    方案 C: 维持现状 — 3.3 秒的快速回弹对玩家影响很小

================================================================================
7. Method B 修复验证
================================================================================

【前次问题回顾】
  setProtectionWindow() 导致 measure() 分子分母不匹配，
  产生 7.4 FPS 虚假低值，污染 Kalman → 误切档至 L3。

【本次验证】
  手动保持段 (70645~80645ms, holdSec=10):
    73826ms: L2, FPS=28.3 ← 正常
    77408ms: L2, FPS=25.1 ← 正常
    81073ms: L2, FPS=24.6 ← hold 到期后首样本，正常
    84160ms: L2, FPS=29.2 ← 正常

  所有 hold 期间及其后的 FPS 读数均在合理范围 (24.6~29.2)。
  无类似前次 7.4 FPS 的伪影出现。

  全数据集最低 FPS = 14.9 (L1, 116193ms, 对应真实重压期)，
  合理且可由后续 Kalman 滤波正确处理。

  结论: Method B (resetInterval + _holdUntilMs) 修复完全生效，
  测量/保持解耦方案在低端机上同样可靠。

================================================================================
8. 与前次测试 (无名氏) 对比
================================================================================

  ┌─────────────────────────┬──────────────┬──────────────┐
  │ 指标                    │ 无名氏(前次) │ fs(低端机)   │
  ├─────────────────────────┼──────────────┼──────────────┤
  │ 测试时长                │ 275.7 秒     │ 345.5 秒     │
  │ 采样数                  │ 132          │ 195          │
  │ 开环 L0 FPS             │ ~16          │ ~17          │
  │ 闭环平均 FPS            │ 26.1         │ 26.9         │
  │ FPS 提升幅度            │ +62%         │ +56%         │
  │ 切换次数                │ 26           │ 25           │
  │ 平均切换间隔            │ 10.6 秒      │ 13.7 秒      │
  │ Ping-pong 次数          │ 6            │ 5            │
  │ ΔFPS₀₁                 │ +1.7         │ +0.5         │
  │ ΔFPS₁₂                 │ +6.1         │ +3.3         │
  │ ΔFPS₂₃                 │ +3.0         │ ≈0           │
  │ 总降载幅度              │ +10.8        │ +3.8         │
  │ L0 驻留时间占比         │ 38.3%        │ 43.6%        │
  │ L3 驻留时间占比         │ 8.8%         │ 9.6%         │
  │ 积分饱和率              │ 96.2%        │ 97.4%        │
  │ 测量伪影                │ 1 次(已修复) │ 0 次         │
  │ 跳级切换                │ 0 次         │ 5 次         │
  │ 开环测试覆盖            │ L0 单档位    │ 全 4 档位    │
  └─────────────────────────┴──────────────┴──────────────┘

  关键差异分析:

  1. 总降载幅度: 低端机仅 3.8 FPS (前次 10.8)
     → 降载手段在 CPU 瓶颈机器上效力大幅衰减
     → 唯一有效手段仍为 _quality=LOW

  2. 切换间隔增加: 13.7 秒 (前次 10.6)
     → 部分因为低端机高档位采样周期更长 (L2/L3 的采样间隔 3~4 秒)
     → 部分因为系统更倾向于跳级而非逐级切换

  3. 跳级行为: 5 次 (前次 0 次)
     → 低端机上 ΔFPS₀₁≈0 导致 L1 被系统性跳过
     → 跳级恢复 (L3→L0) 也更频繁，因为波次间歇 FPS 直接回满

  4. 平均 FPS 反而更高: 26.9 vs 26.1
     → 不代表低端机性能更好，而是本次测试的安静段占比略高
     → 公平对比应看重压段: 两者均在 20~25 FPS 范围

================================================================================
  分析完成于 2026-02
  测试配置: 低端机 (fs)
  工具: PerformanceLogger 环形缓冲 + 列式存储
  方法: 多档位开环系统辨识 + 闭环战斗实测
  PID 参数来源: PIDControllerConfig.xml (Kp=0.25, Ki=0.5, Kd=-30)
  Method B 修复状态: 已验证生效
================================================================================
