_root.装备生命周期函数.光斧金牛初始化 = function(ref:Object, param:Object)
{
    ref.basicStyle = param.basicStyle || "幽红幻刃";
    ref.forceDraw = true;
    // 初始化金牛之力状态追踪
    ref.上一帧打怪掉钱机率 = _root.打怪掉钱机率;
}; 

_root.装备生命周期函数.光斧金牛周期 = function(ref:Object, param:Object)
{
    _root.装备生命周期函数.移除异常周期函数(ref);

    var 自机 = ref.自机;
    var 当前打怪掉钱机率 = _root.打怪掉钱机率;

    // 检测金牛之力效果是否刚刚结束（从<6恢复到6）
    if(ref.上一帧打怪掉钱机率 < 6 && 当前打怪掉钱机率 >= 6) {
        // 效果结束，创建金牛之力子弹标记
        if(自机 && 自机._x !== undefined) {
            var 子弹属性 = new Object();
            子弹属性.声音 = "";
            子弹属性.霰弹值 = 1;
            子弹属性.子弹散射度 = 0;
            子弹属性.发射效果 = "";
            子弹属性.子弹种类 = "金牛之力";
            子弹属性.子弹威力 = 1; // 仅作为视觉效果，无伤害
            子弹属性.子弹速度 = 0;
            子弹属性.击中地图效果 = "";
            子弹属性.Z轴攻击范围 = 72;
            子弹属性.击倒率 = 0;
            子弹属性.击中后子弹的效果 = "";
            子弹属性.水平击退速度 = 0;
            子弹属性.发射者 = 自机._name;
            子弹属性.shootX = 自机._x;
            子弹属性.shootY = 自机.Z轴坐标;
            子弹属性.shootZ = 子弹属性.shootY;
            _root.子弹区域shoot传递(子弹属性);
        }
    }

    // 更新上一帧的值
    ref.上一帧打怪掉钱机率 = 当前打怪掉钱机率;

    // 金牛之力激活期间显示刀光特效
    if(当前打怪掉钱机率 < 6) {
        _root.装备生命周期函数.通用刀光周期(ref, param);
    }
};
