# 射线插件数值建模

日期: 2026-02-28

## 1. 建模前提

### 1.1 发射器弹药基线

发射器弹药**默认无属性加成**(无魔法/无破击)。伤害段数模型:

| 目标数 | 段数 | 总裸伤(D) |
|--------|------|-----------|
| 1 | 3 | 3D |
| 2 | 3+2 | 5D |
| 3 | 3+2+2 | 7D |
| 4(上限) | 3+2+2+2 | 9D |

- 第1个目标: 3段命中
- 后续每目标: 2段
- 期望炸2个, 最多3-4个

### 1.2 射线基础

射线严格**1段命中**。属性加成由插件赋予:
- 魔法 = ×2.0 独立乘区
- 破击 = ×1.15 独立乘区

### 1.3 瞄准难度系数

额外目标(非首次命中)的命中概率折扣:

| 模式 | 瞄准难度 | 命中率 | 理由 |
|------|----------|--------|------|
| pierce(穿透) | 最易 | 0.95 | 直线对齐即可 |
| fork(分裂) | 中等 | 0.85 | 需敌群在分裂范围内 |
| chain(连锁) | 最难 | 0.75 | 需目标在弹跳半径, 且选择不可控 |

首次命中(主射线) = 1.0 (必中)。

### 1.4 插件伤害乘数公式

```
最终威力 = base × (delta + pct/100) × (1 + mult/100) × dtype_mult
delta = 1 + 0.01 × (强化等级-1) × (强化等级+4)
```

常用delta值: Lv5=1.36, Lv7=1.66, Lv9=2.04, Lv13=3.04

## 2. 射线参数一览

### 2.1 插件层 (高等材料_枪械专用.xml)

| 射线 | pct | mult | 属性 | clipSize | 回本点 | 定位 |
|------|-----|------|------|----------|--------|------|
| 热能 | 0 | 45 | 破击×1.15 | +35% | 全等级恒定×1.45 | 破击前期暴力 |
| 磁暴 | 16 | 3 | 魔法×2.0 | - | ~Lv4 | 泛用连锁 |
| 光棱 | 14 | 4 | 魔法×2.0 | - | Lv5 | 精准分裂 |
| 光谱 | 14 | 4 | 魔法×2.0 | - | Lv5 | =光棱致敬(RA2/RA3) |
| 辉光 | 12 | 5 | 魔法×2.0 | - | ~Lv6 | 超远覆盖 |
| 涡旋 | 13 | 4 | 魔法×2.0 | - | ~Lv7 | 大面积撕裂 |
| 谐振波 | 10 | 6 | 魔法×2.0 | - | ~Lv7 | 高精穿透连锁 |
| 等离子 | 9 | 6 | 魔法×2.0 | - | ~Lv8 | 全能全模式 |
| 波能 | 8 | 8 | 魔法×2.0 | - | ~Lv6 | 极致后期 |

### 2.2 子弹层 (bullets_cases.xml)

| 射线 | rayMode | pierceLimit | falloff | 特色 |
|------|---------|-------------|---------|------|
| 热能 | pierce | 6 | 0.90 | 高穿透低衰减, 最远射程1200 |
| 磁暴 | chain | 10 | 0.70 | 纯连锁, 高弹跳次数 |
| 光棱 | fork | 8 | 0.65 | 纯分裂, 高分裂数 |
| 光谱 | chain,fork | 5 | 0.65 | 弹跳后分裂 |
| 辉光 | fork | 5 | 0.60 | 分裂+超远射程1100 |
| 涡旋 | fork,pierce | 6 | 0.75 | 穿透逐节点分裂 |
| 谐振波 | chain,pierce | 6 | 0.70 | 穿透逐节点连锁 |
| 等离子 | chain,fork,pierce | 4 | 0.75 | 全模式, pierceLimit最低 |
| 波能 | pierce | 6 | 0.80 | 纯穿透, 贯穿一切 |

## 3. 伤害模型

### 3.1 射线多目标伤害计算

**pierce(穿透)**:
```
total = sum(falloff^i × aim_pierce  for i in 0..min(targets, pierceLimit)-1)
       (i=0 时 aim=1.0)
```

**chain(连锁)**:
```
total = 1.0 + sum(falloff^i × aim_chain  for i in 1..bounces)
```

**fork(分裂)**:
```
total = 1.0 + sum(falloff^i × aim_fork  for i in 1..forks)
```

**组合模式(per-node)**: 主轴pierce穿透, 每个穿透节点触发chain/fork:
- fork+pierce(涡旋): 穿透N个, 每节点fork 1个
- chain+pierce(谐振波): 穿透N个, 每节点chain 1个
- chain+fork+pierce(等离子): 穿透N个, 每节点chain+fork各1个
- chain+fork(光谱): chain到第1个, 再fork出去

### 3.2 效率公式

```
效率 = 射线总伤 / 发射器裸总伤
     = [段数系数 × 插件乘数 × 属性乘数] / [发射器段数]
```

## 4. 建模结果

### 4.1 全射线效率表 (vs 发射器裸伤害)

**Lv5 (delta=1.36)**

| 射线 | 模式 | 1T | 2T | 3T | 4T | 5T | 6T | 8T |
|------|------|-----|-----|-----|-----|-----|-----|-----|
| 发射器 | 3+2+2+2 | 3D | 5D | 7D | 9D | 9D | 9D | 9D |
| 热能 | pierce | 56% | 62% | 63% | 61% | 73% | 83% | 83% |
| 磁暴 | chain | 77% | 70% | 62% | 55% | 60% | 63% | 67% |
| 光棱 | fork | 76% | 71% | 63% | 55% | 59% | 61% | 64% |
| 光谱 | chain+fork | 76% | 68% | 61% | 53% | 57% | 57% | 57% |
| 辉光 | fork | 76% | 69% | 59% | 51% | 54% | 54% | 54% |
| 涡旋 | fork+pierce | 76% | 75% | 77% | 72% | 85% | 94% | 111% |
| 谐振波 | chain+pierce | 76% | 69% | 71% | 65% | 76% | 83% | 96% |
| 等离子 | c+f+p | 75% | 71% | 71% | 73% | 84% | 96% | 117% |
| 波能 | pierce | 76% | 81% | 77% | 73% | 82% | 90% | 90% |

**Lv7 (delta=1.66)**

| 射线 | 模式 | 1T | 2T | 3T | 4T | 5T | 6T | 8T |
|------|------|-----|-----|-----|-----|-----|-----|-----|
| 热能 | pierce | 56% | 62% | 63% | 61% | 73% | 83% | 83% |
| 磁暴 | chain | 75% | 69% | 61% | 54% | 58% | 62% | 65% |
| 光棱 | fork | 75% | 70% | 62% | 54% | 58% | 60% | 63% |
| 光谱 | chain+fork | 75% | 67% | 59% | 52% | 56% | 56% | 56% |
| 辉光 | fork | 75% | 68% | 58% | 50% | 53% | 53% | 53% |
| 涡旋 | fork+pierce | 75% | 73% | 75% | 70% | 84% | 93% | 109% |
| 谐振波 | chain+pierce | 75% | 69% | 70% | 64% | 75% | 82% | 95% |
| 等离子 | c+f+p | 74% | 70% | 70% | 72% | 83% | 95% | 116% |
| 波能 | pierce | 75% | 80% | 77% | 72% | 82% | 89% | 89% |

**Lv9 (delta=2.04)**

| 射线 | 模式 | 1T | 2T | 3T | 4T | 5T | 6T | 8T |
|------|------|-----|-----|-----|-----|-----|-----|-----|
| 热能 | pierce | 56% | 62% | 63% | 61% | 73% | 83% | 83% |
| 磁暴 | chain | 74% | 68% | 60% | 53% | 58% | 61% | 64% |
| 光棱 | fork | 74% | 69% | 61% | 53% | 57% | 59% | 62% |
| 光谱 | chain+fork | 74% | 66% | 59% | 51% | 55% | 55% | 55% |
| 辉光 | fork | 74% | 67% | 58% | 49% | 52% | 52% | 52% |
| 涡旋 | fork+pierce | 74% | 72% | 74% | 70% | 83% | 91% | 108% |
| 谐振波 | chain+pierce | 74% | 68% | 70% | 63% | 75% | 81% | 94% |
| 等离子 | c+f+p | 74% | 69% | 70% | 72% | 82% | 94% | 115% |
| 波能 | pierce | 75% | 79% | 76% | 71% | 81% | 89% | 89% |

### 4.2 对群增长斜率 (6T/1T, Lv7)

| 排名 | 射线 | 6T/1T | 1T绝对值 | 6T绝对值 | 模式 |
|------|------|-------|----------|----------|------|
| 1 | 热能 | 4.50x | 1.67D | 7.51D | pierce |
| 2 | 等离子 | 3.81x | 2.23D | 8.52D | c+f+p |
| 3 | 涡旋 | 3.72x | 2.24D | 8.35D | fork+pierce |
| 4 | 波能 | 3.55x | 2.26D | 8.05D | pierce |
| 5 | 谐振波 | 3.28x | 2.25D | 7.37D | chain+pierce |
| 6 | 磁暴 | 2.46x | 2.26D | 5.55D | chain |
| 7 | 光棱 | 2.40x | 2.26D | 5.40D | fork |
| 8 | 光谱 | 2.23x | 2.26D | 5.03D | chain+fork |
| 9 | 辉光 | 2.11x | 2.25D | 4.75D | fork |

## 5. 设计分析

### 5.1 三个阵营

数据揭示射线按对群增长能力自然分为三个阵营:

**A. pierce主轴系 (6T/1T > 3.2x)**
- 热能(4.50x)、等离子(3.81x)、涡旋(3.72x)、波能(3.55x)、谐振波(3.28x)
- 特征: 主轴穿透提供稳定的独立衰减叠加, 目标越多收益越高
- 6T效率普遍 80-95%

**B. 纯chain/fork系 (6T/1T < 2.5x)**
- 磁暴(2.46x)、光棱(2.40x)、光谱(2.23x)、辉光(2.11x)
- 特征: 串联衰减累乘, 后续目标贡献递减明显
- 6T效率 53-62%

**C. 热能特殊位 (最高增长但最低基础)**
- 1T只有56%(破击×1.15), 远低于魔法系的74-77%
- 但6T/1T增长4.50x为全场最高, 加上弹容+35%补偿

### 5.2 对单弱化验证

| 射线 | 1T效率 | 弱化来源 |
|------|--------|----------|
| 热能 | 56% | 破击×1.15 vs 魔法×2.0 |
| 魔法射线 | 74-77% | 魔法×2.0, 但仍不到发射器(3段=100%) |

结论: **所有射线对单都弱于发射器**, 这符合"射线=对群武器"的基本定位。
热能进一步弱于其他射线, 用穿透深度+弹容换回来。

### 5.3 瞄准难度 vs 回报

| 难度 | 代表 | 4T效率 | 6T效率 | 结论 |
|------|------|--------|--------|------|
| 最易(pierce) | 波能 | 72% | 89% | 最稳定, 效率最高 |
| 中等(fork) | 光棱 | 54% | 60% | 衰减快, 效率偏低 |
| 最难(chain) | 磁暴 | 54% | 62% | 弹跳随机, 效率偏低 |
| 组合(p+f) | 涡旋 | 70% | 93% | pierce主轴保底, fork加成 |
| 组合(p+c) | 谐振波 | 64% | 82% | pierce保底, chain加成(稍弱于fork) |
| 全量(p+c+f) | 等离子 | 72% | 95% | 三路全开, 最高上限 |

瞄准难度与回报的关系:
- **pierce最易瞄准, 效率也最高** — 这是合理的, 因为pierce的"高效率"需要敌人排成线, 这本身就是一种"瞄准需求"
- **chain最难, 效率最低** — 但chain的优势在于不需要敌人排成线, 只需要密集即可, 这是操作便利性的补偿
- **fork居中** — 需要敌人在分裂半径内, 操作要求适中

### 5.4 热能弹容补偿 (pierce=6, falloff=0.90, +35%弹容)

每弹仓DPS对比 (Lv7, 发射器基线=弹容×5D×期望2目标):

| 弹容 | 射线弹容 | 发射器/弹仓 | 射线1T | 射线2T | 射线3T |
|------|---------|------------|--------|--------|--------|
| 3→4 | +1 | 15.0D | 6.7D (44%) | 12.4D (82%) | 17.5D (**117%**) |
| 4→5 | +1 | 20.0D | 8.3D (42%) | 15.5D (77%) | 21.9D (**109%**) |
| 5→6 | +1 | 25.0D | 10.0D (40%) | 18.6D (74%) | 26.3D (**105%**) |
| 6→8 | +2 | 30.0D | 13.3D (44%) | 24.7D (82%) | 35.0D (**117%**) |

结论: 热能射线在穿透3个目标时, 每弹仓总伤即可**超越发射器**(105-117%)。

### 5.5 光棱修正记录

光棱 falloff 从 0.50 调整为 0.65:

| 指标 | 修正前(0.50) | 修正后(0.65) |
|------|-------------|-------------|
| 1T | 75% | 75% (不变) |
| 2T | 64% | 70% (+6%) |
| 3T | 53% | 62% (+9%) |
| 4T | 44% | 54% (+10%) |
| 6T | 46% | 60% (+14%) |

修正前光棱4T=44%为全场最弱, 高pierceLimit=8被超低衰减完全浪费。
修正后效率与磁暴(54%/62%)对齐, 分裂数量优势开始有实际意义。

## 6. 总结

### 6.1 设计目标达成情况

| 目标 | 状态 | 说明 |
|------|------|------|
| 所有射线对单弱于发射器 | ✓ | 最高77%(磁暴Lv5), 最低56%(热能) |
| 特定分布下对群有优势 | ✓ | pierce系6T可达83-95%, 弹容补偿后3T即超越 |
| 穿透最易瞄准 | ✓ | pierce系效率最高且最稳定 |
| 分裂次之 | ✓ | fork系效率居中, 但操作要求适中 |
| 连锁最难 | ✓ | chain系效率最低, 但操作最便利(只需密集) |
| 热能=前期暴力+弱对单 | ✓ | 1T=56%全场最低, 但6T/1T=4.50x全场最高 |

### 6.2 本次修改清单

| 文件 | 修改 | 理由 |
|------|------|------|
| bullets_cases.xml | 热能射线-强化: pierceLimit 4→6, falloff 0.82→0.90 | 拉大穿透深度, 让对群增长曲线更长 |
| bullets_cases.xml | 光棱射线-强化: falloff 0.50→0.65 | 修正4T=44%全场最弱的问题 |
| 高等材料_枪械专用.xml | 热能射线弹-强化: pct=0 mult=45 clipSize=35 | 纯独立乘区+弹容补偿 |
| 高等材料_枪械专用.xml | 注释块同步更新 | 记录设计意图和关键数据 |
