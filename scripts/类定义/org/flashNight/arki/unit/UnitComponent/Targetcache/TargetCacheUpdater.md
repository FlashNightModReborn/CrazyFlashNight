// 执行完整测试套件
org.flashNight.arki.unit.UnitComponent.Targetcache.TargetCacheUpdaterTest.runAll();

================================================================================
🚀 TargetCacheUpdater 完整测试套件启动
================================================================================

🔧 初始化测试环境...
📦 创建了 50 个测试单位
🌍 构建了模拟游戏世界

📋 执行基础功能测试...
✅ getVersionInfo返回对象 PASS (object is not null)
✅ 版本信息包含enemyVersion PASS
✅ 版本信息包含allyVersion PASS
✅ 版本信息包含totalVersion PASS
✅ 初始enemyVersion为0 PASS (expected=0, actual=0)
✅ 初始allyVersion为0 PASS (expected=0, actual=0)
✅ 初始totalVersion为0 PASS (expected=0, actual=0)
✅ getCurrentThreshold返回有效值 PASS
✅ getThresholdStatus返回对象 PASS (object is not null)
✅ 静态访问器与方法一致 PASS (expected=100, actual=100)
✅ 添加敌人后enemyVersion递增 PASS (expected=1, actual=1)
✅ 添加敌人后allyVersion不变 PASS (expected=0, actual=0)
✅ 添加友军后allyVersion递增 PASS (expected=1, actual=1)
✅ 移除敌人后enemyVersion再次递增 PASS (expected=2, actual=2)

🔍 执行核心更新逻辑测试...
✅ 敌人请求后data不为空 PASS (object is not null)
✅ 敌人请求后nameIndex不为空 PASS (object is not null)
✅ 敌人请求后leftValues不为空 PASS (object is not null)
✅ 敌人请求后rightValues不为空 PASS (object is not null)
✅ 敌人请求后帧数正确 PASS (expected=100, actual=100)
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ 敌人请求结果只包含友军 PASS
✅ 结果中单位血量大于0 PASS
✅ data与leftValues长度一致 PASS (expected=25, actual=25)
✅ data与rightValues长度一致 PASS (expected=25, actual=25)
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求结果只包含敌军 PASS
✅ 友军请求后帧数正确 PASS (expected=200, actual=200)
✅ 全体请求返回多个单位 PASS
✅ 全体请求包含敌军 PASS
✅ 全体请求包含友军 PASS
✅ 全体请求后帧数正确 PASS (expected=300, actual=300)
✅ 首次更新后帧数改变 PASS
✅ 缓存命中时仍更新帧数 PASS (expected=500, actual=500)
✅ 版本更新后重新收集 PASS (expected=600, actual=600)
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ leftValues按升序排列 PASS
✅ nameIndex映射正确 PASS (expected=0, actual=0)
✅ nameIndex映射正确 PASS (expected=1, actual=1)
✅ nameIndex映射正确 PASS (expected=2, actual=2)
✅ nameIndex映射正确 PASS (expected=3, actual=3)
✅ nameIndex映射正确 PASS (expected=4, actual=4)
✅ nameIndex映射正确 PASS (expected=5, actual=5)
✅ nameIndex映射正确 PASS (expected=6, actual=6)
✅ nameIndex映射正确 PASS (expected=7, actual=7)
✅ nameIndex映射正确 PASS (expected=8, actual=8)
✅ nameIndex映射正确 PASS (expected=9, actual=9)
✅ nameIndex映射正确 PASS (expected=10, actual=10)
✅ nameIndex映射正确 PASS (expected=11, actual=11)
✅ nameIndex映射正确 PASS (expected=12, actual=12)
✅ nameIndex映射正确 PASS (expected=13, actual=13)
✅ nameIndex映射正确 PASS (expected=14, actual=14)
✅ nameIndex映射正确 PASS (expected=15, actual=15)
✅ nameIndex映射正确 PASS (expected=16, actual=16)
✅ nameIndex映射正确 PASS (expected=17, actual=17)
✅ nameIndex映射正确 PASS (expected=18, actual=18)
✅ nameIndex映射正确 PASS (expected=19, actual=19)
✅ nameIndex映射正确 PASS (expected=20, actual=20)
✅ nameIndex映射正确 PASS (expected=21, actual=21)
✅ nameIndex映射正确 PASS (expected=22, actual=22)
✅ nameIndex映射正确 PASS (expected=23, actual=23)
✅ nameIndex映射正确 PASS (expected=24, actual=24)
✅ nameIndex映射正确 PASS (expected=25, actual=25)
✅ nameIndex映射正确 PASS (expected=26, actual=26)
✅ nameIndex映射正确 PASS (expected=27, actual=27)
✅ nameIndex映射正确 PASS (expected=28, actual=28)
✅ nameIndex映射正确 PASS (expected=29, actual=29)
✅ nameIndex映射正确 PASS (expected=30, actual=30)
✅ nameIndex映射正确 PASS (expected=31, actual=31)
✅ nameIndex映射正确 PASS (expected=32, actual=32)
✅ nameIndex映射正确 PASS (expected=33, actual=33)
✅ nameIndex映射正确 PASS (expected=34, actual=34)
✅ nameIndex映射正确 PASS (expected=35, actual=35)
✅ nameIndex映射正确 PASS (expected=36, actual=36)
✅ nameIndex映射正确 PASS (expected=37, actual=37)
✅ nameIndex映射正确 PASS (expected=38, actual=38)
✅ nameIndex映射正确 PASS (expected=39, actual=39)
✅ nameIndex映射正确 PASS (expected=40, actual=40)
✅ nameIndex映射正确 PASS (expected=41, actual=41)
✅ nameIndex映射正确 PASS (expected=42, actual=42)
✅ nameIndex映射正确 PASS (expected=43, actual=43)
✅ nameIndex映射正确 PASS (expected=44, actual=44)
✅ nameIndex映射正确 PASS (expected=45, actual=45)
✅ nameIndex映射正确 PASS (expected=46, actual=46)
✅ nameIndex映射正确 PASS (expected=47, actual=47)
✅ nameIndex映射正确 PASS (expected=48, actual=48)
✅ nameIndex映射正确 PASS (expected=49, actual=49)
✅ leftValues与实际坐标一致 PASS (expected=1250.07022688631, actual=1250.07022688631)
✅ rightValues与实际坐标一致 PASS (expected=1270.07022688631, actual=1270.07022688631)
✅ leftValues与实际坐标一致 PASS (expected=1250.23255926557, actual=1250.23255926557)
✅ rightValues与实际坐标一致 PASS (expected=1270.23255926557, actual=1270.23255926557)
✅ leftValues与实际坐标一致 PASS (expected=1250.39047928061, actual=1250.39047928061)
✅ rightValues与实际坐标一致 PASS (expected=1270.39047928061, actual=1270.39047928061)
✅ leftValues与实际坐标一致 PASS (expected=1250.40235802066, actual=1250.40235802066)
✅ rightValues与实际坐标一致 PASS (expected=1270.40235802066, actual=1270.40235802066)
✅ leftValues与实际坐标一致 PASS (expected=1250.6603565882, actual=1250.6603565882)
✅ rightValues与实际坐标一致 PASS (expected=1270.6603565882, actual=1270.6603565882)
✅ leftValues与实际坐标一致 PASS (expected=1250.69845920196, actual=1250.69845920196)
✅ rightValues与实际坐标一致 PASS (expected=1270.69845920196, actual=1270.69845920196)
✅ leftValues与实际坐标一致 PASS (expected=1250.71597301634, actual=1250.71597301634)
✅ rightValues与实际坐标一致 PASS (expected=1270.71597301634, actual=1270.71597301634)
✅ leftValues与实际坐标一致 PASS (expected=1250.73597345734, actual=1250.73597345734)
✅ rightValues与实际坐标一致 PASS (expected=1270.73597345734, actual=1270.73597345734)
✅ leftValues与实际坐标一致 PASS (expected=1250.87749883533, actual=1250.87749883533)
✅ rightValues与实际坐标一致 PASS (expected=1270.87749883533, actual=1270.87749883533)
✅ leftValues与实际坐标一致 PASS (expected=1250.93100933358, actual=1250.93100933358)
✅ rightValues与实际坐标一致 PASS (expected=1270.93100933358, actual=1270.93100933358)
✅ leftValues与实际坐标一致 PASS (expected=1250.9700963553, actual=1250.9700963553)
✅ rightValues与实际坐标一致 PASS (expected=1270.9700963553, actual=1270.9700963553)
✅ leftValues与实际坐标一致 PASS (expected=1251.32880651858, actual=1251.32880651858)
✅ rightValues与实际坐标一致 PASS (expected=1271.32880651858, actual=1271.32880651858)
✅ leftValues与实际坐标一致 PASS (expected=1251.40242634574, actual=1251.40242634574)
✅ rightValues与实际坐标一致 PASS (expected=1271.40242634574, actual=1271.40242634574)
✅ leftValues与实际坐标一致 PASS (expected=1251.60584523808, actual=1251.60584523808)
✅ rightValues与实际坐标一致 PASS (expected=1271.60584523808, actual=1271.60584523808)
✅ leftValues与实际坐标一致 PASS (expected=1251.69941133354, actual=1251.69941133354)
✅ rightValues与实际坐标一致 PASS (expected=1271.69941133354, actual=1271.69941133354)
✅ leftValues与实际坐标一致 PASS (expected=1251.97547137272, actual=1251.97547137272)
✅ rightValues与实际坐标一致 PASS (expected=1271.97547137272, actual=1271.97547137272)
✅ leftValues与实际坐标一致 PASS (expected=1252.12974484777, actual=1252.12974484777)
✅ rightValues与实际坐标一致 PASS (expected=1272.12974484777, actual=1272.12974484777)
✅ leftValues与实际坐标一致 PASS (expected=1252.12976276409, actual=1252.12976276409)
✅ rightValues与实际坐标一致 PASS (expected=1272.12976276409, actual=1272.12976276409)
✅ leftValues与实际坐标一致 PASS (expected=1252.23223820562, actual=1252.23223820562)
✅ rightValues与实际坐标一致 PASS (expected=1272.23223820562, actual=1272.23223820562)
✅ leftValues与实际坐标一致 PASS (expected=1252.25923729828, actual=1252.25923729828)
✅ rightValues与实际坐标一致 PASS (expected=1272.25923729828, actual=1272.25923729828)
✅ leftValues与实际坐标一致 PASS (expected=1252.31017719023, actual=1252.31017719023)
✅ rightValues与实际坐标一致 PASS (expected=1272.31017719023, actual=1272.31017719023)
✅ leftValues与实际坐标一致 PASS (expected=1252.4805986532, actual=1252.4805986532)
✅ rightValues与实际坐标一致 PASS (expected=1272.4805986532, actual=1272.4805986532)
✅ leftValues与实际坐标一致 PASS (expected=1252.51359581016, actual=1252.51359581016)
✅ rightValues与实际坐标一致 PASS (expected=1272.51359581016, actual=1272.51359581016)
✅ leftValues与实际坐标一致 PASS (expected=1252.67837402876, actual=1252.67837402876)
✅ rightValues与实际坐标一致 PASS (expected=1272.67837402876, actual=1272.67837402876)
✅ leftValues与实际坐标一致 PASS (expected=1252.72823074134, actual=1252.72823074134)
✅ rightValues与实际坐标一致 PASS (expected=1272.72823074134, actual=1272.72823074134)
✅ leftValues与实际坐标一致 PASS (expected=1252.741005274, actual=1252.741005274)
✅ rightValues与实际坐标一致 PASS (expected=1272.741005274, actual=1272.741005274)
✅ leftValues与实际坐标一致 PASS (expected=1252.85122103058, actual=1252.85122103058)
✅ rightValues与实际坐标一致 PASS (expected=1272.85122103058, actual=1272.85122103058)
✅ leftValues与实际坐标一致 PASS (expected=1252.9542754055, actual=1252.9542754055)
✅ rightValues与实际坐标一致 PASS (expected=1272.9542754055, actual=1272.9542754055)
✅ leftValues与实际坐标一致 PASS (expected=1253.01195000298, actual=1253.01195000298)
✅ rightValues与实际坐标一致 PASS (expected=1273.01195000298, actual=1273.01195000298)
✅ leftValues与实际坐标一致 PASS (expected=1253.11771610985, actual=1253.11771610985)
✅ rightValues与实际坐标一致 PASS (expected=1273.11771610985, actual=1273.11771610985)
✅ leftValues与实际坐标一致 PASS (expected=1253.14367677085, actual=1253.14367677085)
✅ rightValues与实际坐标一致 PASS (expected=1273.14367677085, actual=1273.14367677085)
✅ leftValues与实际坐标一致 PASS (expected=1253.3949870267, actual=1253.3949870267)
✅ rightValues与实际坐标一致 PASS (expected=1273.3949870267, actual=1273.3949870267)
✅ leftValues与实际坐标一致 PASS (expected=1253.47271759762, actual=1253.47271759762)
✅ rightValues与实际坐标一致 PASS (expected=1273.47271759762, actual=1273.47271759762)
✅ leftValues与实际坐标一致 PASS (expected=1253.62741091521, actual=1253.62741091521)
✅ rightValues与实际坐标一致 PASS (expected=1273.62741091521, actual=1273.62741091521)
✅ leftValues与实际坐标一致 PASS (expected=1253.72441325802, actual=1253.72441325802)
✅ rightValues与实际坐标一致 PASS (expected=1273.72441325802, actual=1273.72441325802)
✅ leftValues与实际坐标一致 PASS (expected=1253.80098693771, actual=1253.80098693771)
✅ rightValues与实际坐标一致 PASS (expected=1273.80098693771, actual=1273.80098693771)
✅ leftValues与实际坐标一致 PASS (expected=1253.81711776601, actual=1253.81711776601)
✅ rightValues与实际坐标一致 PASS (expected=1273.81711776601, actual=1273.81711776601)
✅ leftValues与实际坐标一致 PASS (expected=1253.89055441367, actual=1253.89055441367)
✅ rightValues与实际坐标一致 PASS (expected=1273.89055441367, actual=1273.89055441367)
✅ leftValues与实际坐标一致 PASS (expected=1253.95492856624, actual=1253.95492856624)
✅ rightValues与实际坐标一致 PASS (expected=1273.95492856624, actual=1273.95492856624)
✅ leftValues与实际坐标一致 PASS (expected=1253.97539075231, actual=1253.97539075231)
✅ rightValues与实际坐标一致 PASS (expected=1273.97539075231, actual=1273.97539075231)
✅ leftValues与实际坐标一致 PASS (expected=1254.0353966644, actual=1254.0353966644)
✅ rightValues与实际坐标一致 PASS (expected=1274.0353966644, actual=1274.0353966644)
✅ leftValues与实际坐标一致 PASS (expected=1254.05523222638, actual=1254.05523222638)
✅ rightValues与实际坐标一致 PASS (expected=1274.05523222638, actual=1274.05523222638)
✅ leftValues与实际坐标一致 PASS (expected=1254.33599657845, actual=1254.33599657845)
✅ rightValues与实际坐标一致 PASS (expected=1274.33599657845, actual=1274.33599657845)
✅ leftValues与实际坐标一致 PASS (expected=1254.33599995682, actual=1254.33599995682)
✅ rightValues与实际坐标一致 PASS (expected=1274.33599995682, actual=1274.33599995682)
✅ leftValues与实际坐标一致 PASS (expected=1254.33770542732, actual=1254.33770542732)
✅ rightValues与实际坐标一致 PASS (expected=1274.33770542732, actual=1274.33770542732)
✅ leftValues与实际坐标一致 PASS (expected=1254.39079475589, actual=1254.39079475589)
✅ rightValues与实际坐标一致 PASS (expected=1274.39079475589, actual=1274.39079475589)
✅ leftValues与实际坐标一致 PASS (expected=1254.46535559371, actual=1254.46535559371)
✅ rightValues与实际坐标一致 PASS (expected=1274.46535559371, actual=1274.46535559371)
✅ leftValues与实际坐标一致 PASS (expected=1254.54294917174, actual=1254.54294917174)
✅ rightValues与实际坐标一致 PASS (expected=1274.54294917174, actual=1274.54294917174)
✅ leftValues与实际坐标一致 PASS (expected=1254.64669839712, actual=1254.64669839712)
✅ rightValues与实际坐标一致 PASS (expected=1274.64669839712, actual=1274.64669839712)
✅ leftValues与实际坐标一致 PASS (expected=1254.902283845, actual=1254.902283845)
✅ rightValues与实际坐标一致 PASS (expected=1274.902283845, actual=1274.902283845)

📊 执行版本控制系统测试...
✅ 添加敌人版本递增 PASS (expected=1, actual=1)
✅ 添加敌人友军版本不变 PASS (expected=0, actual=0)
✅ 移除敌人版本再次递增 PASS (expected=2, actual=2)
✅ 添加友军版本递增 PASS (expected=1, actual=1)
✅ 添加友军敌人版本不变 PASS (expected=2, actual=2)
✅ 移除友军版本递增 PASS (expected=2, actual=2)
✅ 总版本正确 PASS (expected=4, actual=4)
✅ 重置前有版本号 PASS
✅ 重置后enemyVersion为0 PASS (expected=0, actual=0)
✅ 重置后allyVersion为0 PASS (expected=0, actual=0)
✅ 重置后totalVersion为0 PASS (expected=0, actual=0)
✅ totalVersion计算正确 PASS (expected=10, actual=10)
✅ enemyVersion非负 PASS
✅ allyVersion非负 PASS
✅ 初始敌人版本=0 PASS (expected=0, actual=0)
✅ 初始友军版本=0 PASS (expected=0, actual=0)
✅ 初始全体版本=0 PASS (expected=0, actual=0)
✅ 添加敌人后敌人版本递增 PASS
✅ 添加敌人后友军版本不变 PASS (expected=0, actual=0)
✅ 添加敌人后全体版本递增 PASS
✅ 添加友军后敌人版本不变 PASS (expected=1, actual=1)
✅ 添加友军后友军版本递增 PASS
✅ 添加友军后全体版本递增 PASS
✅ 全体版本>=敌人版本 PASS
✅ 全体版本>=友军版本 PASS

⚙️ 执行AdaptiveThresholdOptimizer集成测试...
✅ 参数设置后状态可获取 PASS (object is not null)
✅ 预设"dense"应用成功 PASS
✅ 预设"dense"阈值有效 PASS
✅ 预设"sparse"应用成功 PASS
✅ 预设"sparse"阈值有效 PASS
✅ 预设"dynamic"应用成功 PASS
✅ 预设"dynamic"阈值有效 PASS
✅ 预设"stable"应用成功 PASS
✅ 预设"stable"阈值有效 PASS
✅ 预设"default"应用成功 PASS
✅ 预设"default"阈值有效 PASS
✅ 无效预设应该失败 PASS
✅ getThresholdStatus返回对象 PASS (object is not null)
✅ 状态包含currentThreshold PASS
✅ currentThreshold为有效数值 PASS
✅ 更新后阈值仍为有效值 PASS
✅ leftValues生成成功 PASS (object is not null)
✅ leftValues非空 PASS

🏊 执行缓存池管理测试...
✅ 初始缓存池数量为0 PASS (expected=0, actual=0)
✅ 初始内存使用为0 PASS (expected=0, actual=0)
✅ 创建缓存后池数量增加 PASS
✅ 创建缓存后内存使用增加 PASS
✅ 缓存池详情不为空 PASS (object is not null)
✅ 缓存池详情为对象 PASS
✅ 清理前有缓存池 PASS
✅ 部分清理后池数量减少 PASS
✅ 全部清理后池数量为0 PASS (expected=0, actual=0)
✅ 多样化请求创建多个缓存池 PASS
✅ 缓存池有单位数据 PASS
✅ 缓存池有版本号 PASS
✅ 缓存池有单位数据 PASS
✅ 缓存池有版本号 PASS
✅ 缓存池有单位数据 PASS
✅ 缓存池有版本号 PASS
✅ 缓存池有单位数据 PASS
✅ 缓存池有版本号 PASS
✅ 缓存池有单位数据 PASS
✅ 缓存池有版本号 PASS

📦 执行批量操作测试...
✅ 批量添加敌人版本正确 PASS (expected=10, actual=10)
✅ 批量添加友军版本正确 PASS (expected=10, actual=10)
✅ 批量添加总版本正确 PASS (expected=20, actual=20)
✅ 批量移除敌人版本递增 PASS (expected=13, actual=13)
✅ 批量移除友军版本递增 PASS (expected=12, actual=12)
✅ 混合添加敌人版本 PASS (expected=5, actual=5)
✅ 混合添加友军版本 PASS (expected=7, actual=7)
✅ 混合移除后敌人版本 PASS (expected=10, actual=10)
✅ 混合移除后友军版本 PASS (expected=14, actual=14)

⚡ 执行性能基准测试...
📊 updateCache性能: 100次调用耗时 459ms
✅ updateCache性能达标 PASS
📊 批量操作性能: 100次批量操作耗时 50ms
✅ 批量操作性能合理 PASS
📊 缓存池操作性能: 100次操作耗时 1ms
✅ 缓存池操作性能合理 PASS
📊 大数据集测试: 1000个单位处理耗时 41ms
✅ 大数据集处理时间合理 PASS
✅ 大数据集结果非空 PASS
✅ 大数据集数组长度一致 PASS (expected=1000, actual=1000)

🔍 执行调试监控测试...
✅ getDetailedStatusReport返回字符串 PASS (object is not null)
✅ 报告不为空 PASS
✅ 报告包含版本信息 PASS
✅ 报告包含缓存池信息 PASS
✅ 报告包含阈值信息 PASS
✅ performSelfCheck返回对象 PASS (object is not null)
✅ 自检结果包含passed PASS
✅ 自检结果包含errors PASS
✅ 自检结果包含warnings PASS
✅ 自检结果包含performance PASS
✅ 自检错误数组为数组 PASS
✅ 自检警告数组为数组 PASS
✅ 自检性能信息不为空 PASS (object is not null)
✅ 正常情况下自检通过 PASS
✅ 报告提及Enemy Version PASS
✅ 报告提及Active Pools PASS
✅ 报告提及Current Threshold PASS
✅ 自检包含缓存池数量 PASS
✅ 自检包含当前阈值 PASS

🔍 执行边界条件测试...
✅ 空世界data长度为0 PASS (expected=0, actual=0)
✅ 空世界leftValues长度为0 PASS (expected=0, actual=0)
✅ 空世界rightValues长度为0 PASS (expected=0, actual=0)
✅ 空世界帧数正确 PASS (expected=5000, actual=5000)
✅ 单单位世界data长度为1 PASS (expected=1, actual=1)
✅ 单单位世界leftValues长度为1 PASS (expected=1, actual=1)
✅ 单单位世界nameIndex正确 PASS (expected="unit_0", actual="unit_0")
✅ 单单位世界nameIndex映射正确 PASS (expected=0, actual=0)
✅ 结果中单位血量大于0 PASS
✅ 结果中单位血量大于0 PASS
✅ 结果中单位血量大于0 PASS
✅ 结果中单位血量大于0 PASS
✅ 结果中单位血量大于0 PASS
✅ 结果中单位血量大于0 PASS
✅ 结果中单位血量大于0 PASS
✅ 结果中单位血量大于0 PASS
✅ 结果中单位血量大于0 PASS
✅ 结果中单位血量大于0 PASS
✅ 结果中单位血量大于0 PASS
✅ 结果中单位血量大于0 PASS
✅ 结果中单位血量大于0 PASS
✅ 存活单位数量正确 PASS (expected=13, actual=13)
✅ 极端操作后版本号合理 PASS
✅ 大量操作后缓存池合理 PASS

🎯 执行复杂场景集成测试...
✅ 添加单位后数量可能变化 PASS
✅ 移除后数组长度一致 PASS (expected=18, actual=18)
✅ 移除后帧数正确 PASS (expected=7200, actual=7200)
✅ 并发更新帧数正确 PASS (expected=8000, actual=8000)
✅ 并发更新data不为空 PASS (object is not null)
✅ 并发更新数据一致性 PASS
✅ 并发更新帧数正确 PASS (expected=8000, actual=8000)
✅ 并发更新data不为空 PASS (object is not null)
✅ 并发更新数据一致性 PASS
✅ 并发更新帧数正确 PASS (expected=8000, actual=8000)
✅ 并发更新data不为空 PASS (object is not null)
✅ 并发更新数据一致性 PASS
✅ 并发更新帧数正确 PASS (expected=8000, actual=8000)
✅ 并发更新data不为空 PASS (object is not null)
✅ 并发更新数据一致性 PASS
✅ 并发更新帧数正确 PASS (expected=8000, actual=8000)
✅ 并发更新data不为空 PASS (object is not null)
✅ 并发更新数据一致性 PASS
✅ 全体请求数据最多 PASS
✅ 全体请求数据最多 PASS
📊 内存效率测试: 10次循环耗时 82ms
✅ 内存效率测试时间合理 PASS
✅ 内存效率测试后缓存池合理 PASS

================================================================================
📊 测试结果汇总
================================================================================
总测试数: 446
通过: 446 ✅
失败: 0 ❌
成功率: 100%
总耗时: 815ms

⚡ 性能基准报告:
  updateCache: 4.59ms/次 (100次测试)
  batchOperations: 0.5ms/次 (100次测试)
  cachePoolOps: 0.01ms/次 (100次测试)
  largeDataset: 41ms/次 (1次测试)
  memoryEfficiency: 8.2ms/次 (10次测试)

🎯 TargetCacheUpdater当前状态:
=== TargetCacheUpdater Status Report ===

Faction Version Numbers:
  PLAYER: 7
  ENEMY: 8
  HOSTILE_NEUTRAL: 0
  Total Updates: 15

Cache Pool Stats:
  Active Pools: 0
  Total Units Cached: 0

Threshold Optimizer:
  Current Threshold: 30px
  Avg Density: 1px
  Optimizer Version: 1.0.0

FactionManager Integration:
  Status: Integrated
  Registered Factions: 3


🎉 所有测试通过！TargetCacheUpdater 组件质量优秀！
================================================================================
