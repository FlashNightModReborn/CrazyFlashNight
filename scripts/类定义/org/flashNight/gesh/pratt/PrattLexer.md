import org.flashNight.gesh.pratt.*;
// 运行完整的词法分析器测试
PrattLexer_TestSuite.runAllTests();



========== PrattLexer 100%覆盖测试开始 ==========

--- 测试分组1：词法分析器基础API ---
  ✅ API基础：peek()应该不改变lexer状态
  ✅ API基础：第一个token应该是数字
  ✅ API基础：next()应该返回第一个token
  ✅ API基础：next()应该推进到下一个token
  ✅ API基础：next()应该继续推进
  ✅ API基础：表达式结束应该返回EOF
  ✅ API基础：EOF的text应该是<eof>
  ✅ API基础：多次next EOF应该仍然返回EOF

--- 测试分组2：数字Token解析 ---
  ✅ 整数解析：0应该被识别为NUMBER
  ✅ 整数解析：0的text应该正确
  ✅ 整数解析：0的值应该正确
  ✅ 整数解析：123应该被识别为NUMBER
  ✅ 整数解析：123的text应该正确
  ✅ 整数解析：123的值应该正确
  ✅ 整数解析：999999应该被识别为NUMBER
  ✅ 整数解析：999999的text应该正确
  ✅ 整数解析：999999的值应该正确
  ✅ 整数解析：1应该被识别为NUMBER
  ✅ 整数解析：1的text应该正确
  ✅ 整数解析：1的值应该正确
  ✅ 浮点数解析：1.0应该被识别为NUMBER
  ✅ 浮点数解析：1.0的text应该正确
  ✅ 浮点数解析：1.0的值应该正确
  ✅ 浮点数解析：123.456应该被识别为NUMBER
  ✅ 浮点数解析：123.456的text应该正确
  ✅ 浮点数解析：123.456的值应该正确
  ✅ 浮点数解析：0.5应该被识别为NUMBER
  ✅ 浮点数解析：0.5的text应该正确
  ✅ 浮点数解析：0.5的值应该正确
  ✅ 浮点数解析：.5应该被识别为NUMBER
  ✅ 浮点数解析：.5的text应该正确
  ✅ 浮点数解析：.5的值应该正确
  ✅ 浮点数解析：1.应该被识别为NUMBER
  ✅ 浮点数解析：1.的text应该正确
  ✅ 浮点数解析：1.的值应该正确
  ✅ 浮点数解析：0.0应该被识别为NUMBER
  ✅ 浮点数解析：0.0的text应该正确
  ✅ 浮点数解析：0.0的值应该正确
  ✅ 特殊数字：000应该被识别为NUMBER
  ✅ 特殊数字：000的text应该保持原样
  ✅ 特殊数字：0123应该被识别为NUMBER
  ✅ 特殊数字：0123的text应该保持原样
  ✅ 特殊数字：99999999999应该被识别为NUMBER
  ✅ 特殊数字：99999999999的text应该保持原样
  ✅ 数字分隔：数字部分应该正确
  ✅ 数字分隔：后续标识符应该正确

--- 测试分组3：字符串Token解析 ---
  ✅ 基础字符串："hello"应该被识别为STRING
  ✅ 基础字符串："hello"的text应该包含引号
  ✅ 基础字符串："hello"的值应该是hello
  ✅ 基础字符串：'world'应该被识别为STRING
  ✅ 基础字符串：'world'的text应该包含引号
  ✅ 基础字符串：'world'的值应该是world
  ✅ 基础字符串：""应该被识别为STRING
  ✅ 基础字符串：""的text应该包含引号
  ✅ 基础字符串：""的值应该是
  ✅ 基础字符串：''应该被识别为STRING
  ✅ 基础字符串：''的text应该包含引号
  ✅ 基础字符串：''的值应该是
  ✅ 转义字符串："hello\nworld"应该被识别为STRING
  ✅ 转义字符串："hello\nworld"的值转义应该正确
  ✅ 转义字符串：'tab\there'应该被识别为STRING
  ✅ 转义字符串：'tab\there'的值转义应该正确
  ✅ 转义字符串："quote\"test"应该被识别为STRING
  ✅ 转义字符串："quote\"test"的值转义应该正确
  ✅ 转义字符串：'apos\'test'应该被识别为STRING
  ✅ 转义字符串：'apos\'test'的值转义应该正确
  ✅ 转义字符串："backslash\\test"应该被识别为STRING
  ✅ 转义字符串："backslash\\test"的值转义应该正确
  ✅ 转义字符串："return\rtest"应该被识别为STRING
  ✅ 转义字符串："return\rtest"的值转义应该正确
  ✅ 特殊字符串："123"应该被识别为STRING
  ✅ 特殊字符串："true"应该被识别为STRING
  ✅ 特殊字符串："null"应该被识别为STRING
  ✅ 特殊字符串：" \t\n "应该被识别为STRING
  ✅ 特殊字符串："@#$%^&*"应该被识别为STRING
  ✅ 特殊字符串："中文测试"应该被识别为STRING
  ✅ 未知转义：应该仍然被识别为STRING
  ✅ 未知转义：应该保留转义后的字符

--- 测试分组4：标识符和关键字识别 ---
  ✅ 标识符：myVar应该被识别为IDENTIFIER
  ✅ 标识符：myVar的text应该正确
  ✅ 标识符：test123应该被识别为IDENTIFIER
  ✅ 标识符：test123的text应该正确
  ✅ 标识符：_private应该被识别为IDENTIFIER
  ✅ 标识符：_private的text应该正确
  ✅ 标识符：$special应该被识别为IDENTIFIER
  ✅ 标识符：$special的text应该正确
  ✅ 标识符：camelCase应该被识别为IDENTIFIER
  ✅ 标识符：camelCase的text应该正确
  ✅ 标识符：snake_case应该被识别为IDENTIFIER
  ✅ 标识符：snake_case的text应该正确
  ✅ 标识符：MixedCase应该被识别为IDENTIFIER
  ✅ 标识符：MixedCase的text应该正确
  ✅ 标识符：a应该被识别为IDENTIFIER
  ✅ 标识符：a的text应该正确
  ✅ 标识符：x1应该被识别为IDENTIFIER
  ✅ 标识符：x1的text应该正确
  ✅ 标识符：var$应该被识别为IDENTIFIER
  ✅ 标识符：var$的text应该正确
  ✅ 标识符：_应该被识别为IDENTIFIER
  ✅ 标识符：_的text应该正确
  ✅ 标识符：$应该被识别为IDENTIFIER
  ✅ 标识符：$的text应该正确
  ✅ 关键字：true应该被识别为BOOLEAN
  ✅ 关键字：true的text应该正确
  ✅ 关键字：false应该被识别为BOOLEAN
  ✅ 关键字：false的text应该正确
  ✅ 关键字：null应该被识别为NULL
  ✅ 关键字：null的text应该正确
  ✅ 关键字：undefined应该被识别为UNDEFINED
  ✅ 关键字：undefined的text应该正确
  ✅ 关键字：if应该被识别为IF
  ✅ 关键字：if的text应该正确
  ✅ 关键字：else应该被识别为ELSE
  ✅ 关键字：else的text应该正确
  ✅ 关键字：and应该被识别为AND
  ✅ 关键字：and的text应该正确
  ✅ 关键字：or应该被识别为OR
  ✅ 关键字：or的text应该正确
  ✅ 关键字：not应该被识别为NOT
  ✅ 关键字：not的text应该正确
  ✅ 大小写敏感：True应该被识别为IDENTIFIER而不是关键字
  ✅ 大小写敏感：FALSE应该被识别为IDENTIFIER而不是关键字
  ✅ 大小写敏感：NULL应该被识别为IDENTIFIER而不是关键字
  ✅ 大小写敏感：If应该被识别为IDENTIFIER而不是关键字
  ✅ 大小写敏感：ELSE应该被识别为IDENTIFIER而不是关键字
  ✅ 部分关键字：truthy应该被识别为完整的IDENTIFIER
  ✅ 部分关键字：falsehood应该被识别为完整的IDENTIFIER
  ✅ 部分关键字：nullish应该被识别为完整的IDENTIFIER
  ✅ 部分关键字：ifStatement应该被识别为完整的IDENTIFIER

--- 测试分组5：运算符识别 ---
  ✅ 单字符运算符：+应该被识别为OPERATOR
  ✅ 单字符运算符：+的text应该正确
  ✅ 单字符运算符：-应该被识别为OPERATOR
  ✅ 单字符运算符：-的text应该正确
  ✅ 单字符运算符：*应该被识别为OPERATOR
  ✅ 单字符运算符：*的text应该正确
  ✅ 单字符运算符：/应该被识别为OPERATOR
  ✅ 单字符运算符：/的text应该正确
  ✅ 单字符运算符：%应该被识别为OPERATOR
  ✅ 单字符运算符：%的text应该正确
  ✅ 单字符运算符：<应该被识别为OPERATOR
  ✅ 单字符运算符：<的text应该正确
  ✅ 单字符运算符：>应该被识别为OPERATOR
  ✅ 单字符运算符：>的text应该正确
  ✅ 单字符运算符：=应该被识别为OPERATOR
  ✅ 单字符运算符：=的text应该正确
  ✅ 单字符运算符：!应该被识别为OPERATOR
  ✅ 单字符运算符：!的text应该正确
  ✅ 单字符运算符：&应该被识别为OPERATOR
  ✅ 单字符运算符：&的text应该正确
  ✅ 单字符运算符：|应该被识别为OPERATOR
  ✅ 单字符运算符：|的text应该正确
  ✅ 单字符运算符：^应该被识别为OPERATOR
  ✅ 单字符运算符：^的text应该正确
  ✅ 单字符运算符：~应该被识别为OPERATOR
  ✅ 单字符运算符：~的text应该正确
  ✅ 双字符运算符：==应该被识别为OPERATOR
  ✅ 双字符运算符：==的text应该正确
  ✅ 双字符运算符：!=应该被识别为OPERATOR
  ✅ 双字符运算符：!=的text应该正确
  ✅ 双字符运算符：<=应该被识别为OPERATOR
  ✅ 双字符运算符：<=的text应该正确
  ✅ 双字符运算符：>=应该被识别为OPERATOR
  ✅ 双字符运算符：>=的text应该正确
  ✅ 双字符运算符：&&应该被识别为OPERATOR
  ✅ 双字符运算符：&&的text应该正确
  ✅ 双字符运算符：||应该被识别为OPERATOR
  ✅ 双字符运算符：||的text应该正确
  ✅ 双字符运算符：++应该被识别为OPERATOR
  ✅ 双字符运算符：++的text应该正确
  ✅ 双字符运算符：--应该被识别为OPERATOR
  ✅ 双字符运算符：--的text应该正确
  ✅ 双字符运算符：+=应该被识别为OPERATOR
  ✅ 双字符运算符：+=的text应该正确
  ✅ 双字符运算符：-=应该被识别为OPERATOR
  ✅ 双字符运算符：-=的text应该正确
  ✅ 双字符运算符：*=应该被识别为OPERATOR
  ✅ 双字符运算符：*=的text应该正确
  ✅ 双字符运算符：/=应该被识别为OPERATOR
  ✅ 双字符运算符：/=的text应该正确
  ✅ 双字符运算符：%=应该被识别为OPERATOR
  ✅ 双字符运算符：%=的text应该正确
  ✅ 双字符运算符：**应该被识别为OPERATOR
  ✅ 双字符运算符：**的text应该正确
  ✅ 双字符运算符：??应该被识别为OPERATOR
  ✅ 双字符运算符：??的text应该正确
  ✅ 三字符运算符：===应该被识别为OPERATOR
  ✅ 三字符运算符：===的text应该正确
  ✅ 三字符运算符：!==应该被识别为OPERATOR
  ✅ 三字符运算符：!==的text应该正确
  ✅ 运算符优先级：应该识别出===
  ✅ 运算符优先级：应该识别出!=
  ✅ 运算符优先级：应该识别出单独的+
  ✅ 运算符优先级：应该识别出++
  ✅ 运算符优先级：应该识别出+=
  ✅ 紧连运算符：标识符a应该正确分离
  ✅ 紧连运算符：++应该正确分离
  ✅ 紧连运算符：标识符b应该正确分离
  ✅ 紧连运算符：--应该正确分离
  ✅ 紧连运算符：标识符c应该正确分离

--- 测试分组6：分隔符识别 ---
  ✅ 分隔符类型：(应该被识别为LPAREN
  ✅ 分隔符文本：(的text应该正确
  ✅ 分隔符类型：)应该被识别为RPAREN
  ✅ 分隔符文本：)的text应该正确
  ✅ 分隔符类型：[应该被识别为LBRACKET
  ✅ 分隔符文本：[的text应该正确
  ✅ 分隔符类型：]应该被识别为RBRACKET
  ✅ 分隔符文本：]的text应该正确
  ✅ 分隔符类型：{应该被识别为LBRACE
  ✅ 分隔符文本：{的text应该正确
  ✅ 分隔符类型：}应该被识别为RBRACE
  ✅ 分隔符文本：}的text应该正确
  ✅ 分隔符类型：,应该被识别为COMMA
  ✅ 分隔符文本：,的text应该正确
  ✅ 分隔符类型：;应该被识别为SEMICOLON
  ✅ 分隔符文本：;的text应该正确
  ✅ 分隔符类型：.应该被识别为DOT
  ✅ 分隔符文本：.的text应该正确
  ✅ 分隔符类型：:应该被识别为COLON
  ✅ 分隔符文本：:的text应该正确
  ✅ 分隔符类型：?应该被识别为QUESTION
  ✅ 分隔符文本：?的text应该正确
  ✅ 连续分隔符：位置0应该是LPAREN
  ✅ 连续分隔符：位置1应该是LBRACKET
  ✅ 连续分隔符：位置2应该是LBRACE
  ✅ 连续分隔符：位置3应该是RBRACE
  ✅ 连续分隔符：位置4应该是RBRACKET
  ✅ 连续分隔符：位置5应该是RPAREN
  ✅ 连续分隔符：位置6应该是SEMICOLON
  ✅ 连续分隔符：位置7应该是DOT
  ✅ 连续分隔符：位置8应该是COMMA
  ✅ 连续分隔符：位置9应该是QUESTION
  ✅ 连续分隔符：位置10应该是COLON
  ✅ 混合分隔符：函数名应该正确
  ✅ 混合分隔符：左括号应该正确
  ✅ 混合分隔符：参数a应该正确
  ✅ 混合分隔符：逗号应该正确
  ✅ 混合分隔符：参数b应该正确
  ✅ 混合分隔符：右括号应该正确

--- 测试分组7：空白字符处理 ---
  ✅ 空白跳过：应该跳过前置空白并识别出数字
  ✅ 空白跳过：数字内容应该正确
  ✅ 空白跳过：应该跳过前置空白并识别出数字
  ✅ 空白跳过：数字内容应该正确
  ✅ 空白跳过：应该跳过前置空白并识别出数字
  ✅ 空白跳过：数字内容应该正确
  ✅ 空白跳过：应该跳过前置空白并识别出数字
  ✅ 空白跳过：数字内容应该正确
  ✅ 空白跳过：应该跳过前置空白并识别出数字
  ✅ 空白跳过：数字内容应该正确
  ✅ 空白跳过：应该跳过前置空白并识别出数字
  ✅ 空白跳过：数字内容应该正确
  ✅ 空白跳过：应该跳过前置空白并识别出数字
  ✅ 空白跳过：数字内容应该正确
  ✅ 空白跳过：应该跳过前置空白并识别出数字
  ✅ 空白跳过：数字内容应该正确
  ✅ 复合空白：第一个标识符应该正确
  ✅ 复合空白：第二个标识符应该正确
  ✅ 复合空白：应该正确到达EOF
  ✅ 纯空白：只有空白的输入应该直接返回EOF
  ✅ 表达式空白：应该识别出5个token
  ✅ 表达式空白：所有token都应该正确

--- 测试分组8：注释处理 ---
  ✅ 纯单行注释：应该跳过整行并返回EOF
  ✅ 注释后代码：注释前的代码应该正确
  ✅ 注释后代码：注释后应该是EOF
  ✅ 注释换行：换行后的代码应该正确
  ✅ 纯多行注释：应该跳过注释并返回EOF
  ✅ 多行注释中间：注释前应该正确
  ✅ 多行注释中间：注释后应该正确
  ✅ 多行注释中间：最后应该是EOF
  ✅ 多行换行注释：开始token应该正确
  ✅ 多行换行注释：结束token应该正确
  ✅ 复杂注释：开始应该正确

--- 测试分组9：位置跟踪准确性 ---
  ✅ 单行位置：'abc'应该在(1,1)
  ✅ 单行位置：'+'应该在(1,5)
  ✅ 单行位置：'def'应该在(1,7)
  ✅ 多行位置：'first'应该在(1,1)
  ✅ 多行位置：'second'应该在(2,1)
  ✅ 多行位置：'third'应该在(3,3)，因为前面有2个空格
  ✅ 复杂位置：'if'应该在第1行第1列
  ✅ 复杂位置：'return'应该在第2行
  ✅ 复杂位置：'true'应该在第2行
  ✅ 制表符位置：'a'应该在(1,1)
  ✅ 制表符位置：'b'应该在第1行
  ✅ 制表符位置：'c'应该在第1行

--- 测试分组10：错误条件处理 ---
  ✅ 未终止双引号：应该抛出错误
  ✅ 未终止单引号：应该抛出错误
  ✅ 多行未终止字符串：应该抛出错误
  ✅ 字符串以反斜杠结尾：应该抛出未终止错误
  ✅ 未终止注释：应该优雅处理并到达EOF
  ✅ 未知字符：@应该被当作运算符
  ✅ 未知字符：#应该被当作运算符

--- 测试分组11：边界条件 ---
  ✅ 空输入：应该立即返回EOF
  ✅ 单字符：a应该被正确识别
  ✅ 单字符：a后应该是EOF
  ✅ 单字符：1应该被正确识别
  ✅ 单字符：1后应该是EOF
  ✅ 单字符：+应该被正确识别
  ✅ 单字符：+后应该是EOF
  ✅ 单字符：(应该被正确识别
  ✅ 单字符：(后应该是EOF
  ✅ 超长标识符：应该被识别为IDENTIFIER
  ✅ 超长标识符：长度应该正确
  ✅ 超长数字：应该被识别为NUMBER
  ✅ 超长数字：文本应该完整保留
  ✅ 大量空白：应该正确跳过并识别内容
  ✅ 大量换行：应该正确识别最终token
  ✅ 大量换行：行号应该正确计算

--- 测试分组12：复杂综合场景 ---
  ✅ JS表达式：应该识别出足够多的token
  ✅ JS表达式：第一个token应该是function
  ✅ 注释表达式：应该识别出5个有效token
  ✅ 注释表达式：所有token应该正确，注释被忽略
  ✅ 特殊字符串：单引号字符串应该正确
  ✅ 特殊字符串：转义应该正确处理
  ✅ 特殊字符串：双引号字符串应该正确
  ✅ 特殊字符串：双引号转义应该正确
  ✅ 运算符优先级：token数量应该正确
  ✅ 运算符优先级：token[0]应该是a
  ✅ 运算符优先级：token[1]应该是===
  ✅ 运算符优先级：token[2]应该是b
  ✅ 运算符优先级：token[3]应该是&&
  ✅ 运算符优先级：token[4]应该是c
  ✅ 运算符优先级：token[5]应该是!=
  ✅ 运算符优先级：token[6]应该是d
  ✅ 运算符优先级：token[7]应该是||
  ✅ 运算符优先级：token[8]应该是e
  ✅ 运算符优先级：token[9]应该是<=
  ✅ 运算符优先级：token[10]应该是f
  ✅ 运算符优先级：token[11]应该是**
  ✅ 运算符优先级：token[12]应该是g
  ✅ 运算符优先级：token[13]应该是%
  ✅ 运算符优先级：token[14]应该是h
  ✅ 嵌套括号：应该识别出4个左括号
  ✅ 嵌套括号：应该识别出4个右括号
  ✅ 混合数字：应该识别出5个数字
  ✅ 混合数字：所有数字值应该正确

========== PrattLexer 测试结果 ==========
总计: 334 个测试
通过: 334 个
失败: 0 个
覆盖率: 100%
✅ PrattLexer 所有测试通过！
==========================================
